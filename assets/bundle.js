!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var c,a=[],p=!1,l=-1;function f(){p&&c&&(p=!1,c.length?a=c.concat(a):l=-1,a.length&&h())}function h(){if(!p){var t=s(f);p=!0;for(var e=a.length;e;){for(c=a,a=[];++l<e;)c&&c[l].run();l=-1,e=a.length}c=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];a.push(new _(t,e)),1!==a.length||p||s(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,u,s,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var p=new Error('Uncaught, unspecified "error" event. ('+e+")");throw p.context=e,p}if(i(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),u=(a=r.slice()).length,c=0;c<u;c++)a[c].apply(this,s);return!0},r.prototype.addListener=function(t,e){var u;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(u=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&u>0&&this._events[t].length>u&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function o(){this.removeListener(t,o),r||(r=!0,e.apply(this,arguments))}return o.listener=e,this.on(t,o),this},r.prototype.removeListener=function(t,e){var r,i,u,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(u=(r=this._events[t]).length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=u;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){t.exports=r(4)},function(t,e,r){var n,o=r(5),i=o.rethinkdb,u="test",s="0",c="0";function a(t,e){$("#clients").append($("<button>",{id:t,class:"chatbtn list-group-item bg-dark text-white text-left",text:e})),$("#"+t).append($("<span>",{id:"badge"+e,class:"badge badge-danger float-right",text:"New",style:"display:none"})),e.includes("_and_")||$("#modal_list").append($("<button>",{id:"modal"+t,class:"create-group-list list-group-item list-group-item-action border",text:e}))}function p(t,e){var r=[];return e.forEach(function(e){if(!t.includes(e.id)){let t=e.groupname.split("_and_");if(2===t.length){for(let n=0;n<2;n++)if(t[n]!==u){t=t[n],console.log("new group name: "+t),r.push({newreceiver:t,newid:e.id});break}}else console.log("new multi group name: "+e.groupname),r.push({newreceiver:e.groupname,newid:e.id})}}),r}o.connect({host:"localhost",port:3e3,path:"/",secure:!1,db:"test"}).then(function(t){function e(e){return new Promise(function(r){var n=[];e.forEach(function(e){n.push(i.table("profiles").get(s).update({group:i.row("group").merge(i.object(e.newid,{receiver:e.newreceiver,hasread:0}))}).run(t,function(t,e){if(t)throw t}))}),$.when.apply($,n).done(function(){r("3. push any groups updates to the user profiles")})})}function r(e,r){i.table("messages").getAll(e,{index:"group_id"}).count().run(t,function(t,e){if(t)throw t;e!==r.hasread&&($("#badge"+r.receiver).text(e),$("#badge"+r.receiver).show())})}function o(e){var r,n;i.table("messages").getAll(e,{index:"group_id"}).changes().run(t,function(e,o){if(e)throw e;o.each(function(e,o){if(e)throw e;r=o.new_val.message.sender,(n=o.new_val.group_id)!==c?("null"!==o.new_val.groupchat&&(r=o.new_val.groupchat),i.table("messages").getAll(n,{index:"group_id"}).count().sub(i.table("profiles").get(s)("group")(n)("hasread")).run(t,function(t,e){if(t)throw t;$("#badge"+r).text(e),$("#badge"+r).show()})):($("#messages").append($("<li>",{text:o.new_val.message.content}).append($("<span>",{class:"float-right",text:r}))),i.table("profiles").get(s).update(function(t){return{group:t("group").merge(i.object(n,{hasread:t("group")(n)("hasread").add(1)}))}}).run(t,function(t,e){if(t)throw t}))})})}var l=async function(){const n=await new Promise(function(e){i.table("profiles").getAll(u,{index:"username"}).run(t,function(t,r){if(t)throw t;r.toArray(function(t,r){if(t)throw t;if(0!==r.length){s=r[0].id,console.log("1. get basic status, sender: "+s);var n=Object.keys(r[0].group);console.log(n),e(n)}else console.log("user not existed!"),e(["null"])})})});if("null"!==n[0]){const c=await function(e){return new Promise(function(r){i.table("groups").filter(function(t){return t("groupname").match(u)}).run(t,function(t,n){if(t)throw t;n.toArray(function(t,n){console.log("2. get info of new added groups"),r(p(e,n))})})})}(n);console.log(await e(c)),i.table("profiles").get(s).run(t,function(n,s){if(n)throw n;for(var c in s.group){var l=s.group[c];a(c,l.receiver),r(c,l),o(c)}i.table("groups").filter(function(t){return t("groupname").match(u)}).changes().run(t,function(t,r){if(t)throw t;r.each(function(t,r){if(t)throw t;var n=p([],[r.new_val]);e(n).then(function(){a(n[0].newid,n[0].newreceiver),o(n[0].newid)})})})})}else $(".page2").hide(),$(".page3").show()};$(".page1").submit(function(t){t.preventDefault(),u=$(".name").val(),$(this).hide(),$(".page2").show(),$(".loginname").text($(".name").val()),l()}),$(".page3").submit(function(e){e.preventDefault(),u=$(".signup_name").val();var r=$(".signup_email").val();$(this).hide(),$(".page2").show(),$(".loginname").text($(".signup_name").val()),i.table("profiles").insert({email:r,username:u,group:{},timestamp:new Date}).run(t,function(t,e){if(t)throw t})}),$("#registerBtn").on("click",function(t){t.preventDefault(),$(".page1").hide(),$(".page2").hide(),$(".page3").show()}),$("#addBtn").on("click",function(e){e.preventDefault();var r=$("#add").val();i.table("profiles").getAll(r,{index:"username"}).run(t,function(e,r){if(e)throw e;r.toArray(function(e,r){0===r.length?$(".nonexiste_alert").show():i.table("groups").insert({groupname:u+"_and_"+r[0].username,groupmember:[s,r[0].id],timestamp:new Date}).run(t,function(t,e){if(t)throw t;console.log("friend group id: "+e.generated_keys[0]+" you create a new chat group!")})})}),$("#add").val("")}),$("#clients").on("click",".chatbtn",function(e){if(e.preventDefault(),$(".defaultarea").hide(),$(".chatarea").show(),c!==$(this).attr("id")){c=$(this).attr("id"),$(".chatarea").find("h5").empty(),$("#messages").empty();var r=$(this).contents().filter(function(){return 3==this.nodeType});n=r.text(),$(".chatarea").prepend($("<h5>").text("Now you can talk to: "+n)),$("#badge"+n).hide(),new Promise(function(e){i.table("profiles").get(s).update(function(t){return{group:t("group").merge(i.object(c,{hasread:i.table("messages").getAll(c,{index:"group_id"}).count()}))}},{nonAtomic:!0}).run(t,function(t,r){if(t)throw t;console.log(r),e("you enter a chat group, set hasread to the total number")})}).then(function(e){console.log(e),i.table("messages").getAll(c,{index:"group_id"}).run(t,function(t,e){if(t)throw t;e.toArray(function(t,e){if(t)throw t;e.forEach(function(t){$("#messages").append($("<li>",{text:t.message.content}).append($("<span>",{class:"float-right",text:t.message.sender})))})}),window.scrollTo(0,document.body.scrollHeight)})})}}),$("#createBtn").on("click",function(e){e.preventDefault();var r=u+"_and_",n=[s],o=0;$(".create-group-list").each(function(t){$(this).hasClass("active")&&(r+=$(this).text()+"_and_",n.push($(this).attr("id").substring(5)),o++)}),o>=2?(r=r.substring(0,r.length-5),console.log(r),console.log(n),$("#exampleModal").modal("hide"),$(".create-group-list").each(function(t){$(this).removeClass("active")}),i.table("groups").insert({groupmember:n,groupname:r,timestamp:new Date}).run(t,function(t,e){if(t)throw t})):$(".lesspeople_alert").show()}),$(".chat").submit(function(e){e.preventDefault();var r="null";n.includes("_and_")&&(r=n),i.table("messages").insert({group_id:c,groupchat:r,message:{content:$("#m").val(),sender:u},sender_id:s,timestamp:new Date}).run(t,function(t,e){if(t)throw t}),$("#m").val("")})})},function(t,e,r){(function(e,n,o,i){!function(e,n){t.exports=n(r(2))}(0,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){t.exports=r(1)},function(t,r,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(r,"__esModule",{value:!0});var i=o(n(2)),u=o(n(40)),s=o(n(49)),c=n(42);function a(t){var r=t.host,n=t.port,o=t.path,s=t.secure,a=t.wsProtocols,p=t.db,l=t.simulatedLatencyMs;(0,c.configureTcpPolyfill)({path:o,secure:s,wsProtocols:a,simulatedLatencyMs:l});var f=e.browser;e.browser=!1;var h={host:r,port:n,db:p},_=i.default.promisify(u.default.connect)(h);return e.browser=f,_}var p={rethinkdb:u.default,protodef:s.default,Promise:i.default,connect:a};r.rethinkdb=u.default,r.protodef=s.default,r.Promise=i.default,r.connect=a,r.default=p},function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=r(3)();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(t){}return o},t.exports=o},function(t,r,n){"use strict";t.exports=function(){var r,o=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new T.PromiseInspection(this._target())},u=function(t){return T.reject(new l(t))},s=n(4);r=s.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},s.notEnumerableProp(T,"_getDomain",r);var c={},a=n(6),p=n(9),l=T.TypeError=p.TypeError;T.RangeError=p.RangeError,T.CancellationError=p.CancellationError,T.TimeoutError=p.TimeoutError,T.OperationalError=p.OperationalError,T.RejectionError=p.OperationalError,T.AggregateError=p.AggregateError;var f=function(){},h={},_={e:null},y=n(10)(T,f),d=n(11)(T,f,y,u),v=n(12)(),g=n(13)(T,v),m=n(14)(T,v,g),w=n(15)(_),b=n(16),E=b._nodebackForPromise,R=s.errorObj,O=s.tryCatch;function T(t){if("function"!=typeof t)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==T)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==f&&this._resolveFromResolver(t)}function A(t){var e=new T(f);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}return T.prototype.toString=function(){return"[object Promise]"},T.prototype.caught=T.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),o=0;for(r=0;r<e-1;++r){var i=arguments[r];if("function"!=typeof i)return T.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));n[o++]=i}n.length=o,t=arguments[r];var u=new w(n,t,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},T.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},T.prototype.then=function(t,e,r){if(g()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(n+=", "+s.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},T.prototype.done=function(t,e,r){this._then(t,e,r,void 0,void 0)._setIsFinal()},T.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,h,void 0)},T.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},T.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},T.prototype.all=function(){return new d(this).promise()},T.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},T.getNewLibraryCopy=t.exports,T.is=function(t){return t instanceof T},T.fromNode=function(t){var e=new T(f),r=O(t)(E(e));return r===R&&e._rejectCallback(r.e,!0,!0),e},T.all=function(t){return new d(t).promise()},T.defer=T.pending=function(){var t=new T(f);return new b(t)},T.cast=function(t){var e=y(t);if(!(e instanceof T)){var r=e;(e=new T(f))._fulfillUnchecked(r)}return e},T.resolve=T.fulfilled=T.cast,T.reject=T.rejected=function(t){var e=new T(f);return e._captureStackTrace(),e._rejectCallback(t,!0),e},T.setScheduler=function(t){if("function"!=typeof t)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},T.prototype._then=function(t,e,n,o,i){var u=void 0!==i,s=u?i:new T(f);u||(s._propagateFrom(this,5),s._captureStackTrace());var c=this._target();c!==this&&(void 0===o&&(o=this._boundTo),u||s._setIsMigrated());var p=c._addCallbacks(t,e,n,s,o,r());return c._isResolved()&&!c._isSettlePromisesQueued()&&a.invoke(c._settlePromiseAtPostResolution,c,p),s},T.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},T.prototype._length=function(){return 131071&this._bitField},T.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},T.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},T.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},T.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},T.prototype._setRejected=function(){this._bitField=134217728|this._bitField},T.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},T.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},T.prototype._isFinal=function(){return(33554432&this._bitField)>0},T.prototype._cancellable=function(){return(67108864&this._bitField)>0},T.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},T.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},T.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},T.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},T.prototype._isMigrated=function(){return(4194304&this._bitField)>0},T.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},T.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},T.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},T.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},T.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof T?t.isFulfilled()?t.value():void 0:t},T.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),i=t._promiseAt(e),u=t._receiverAt(e);i instanceof T&&i._setIsMigrated(),void 0===u&&(u=c),this._addCallbacks(r,n,o,i,u,null)},T.prototype._addCallbacks=function(t,e,r,n,o,i){var u=this._length();if(u>=131066&&(u=0,this._setLength(0)),0===u)this._promise0=n,void 0!==o&&(this._receiver0=o),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e)),"function"==typeof r&&(this._progressHandler0=null===i?r:i.bind(r));else{var s=5*u-5;this[s+3]=n,this[s+4]=o,"function"==typeof t&&(this[s+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[s+1]=null===i?e:i.bind(e)),"function"==typeof r&&(this[s+2]=null===i?r:i.bind(r))}return this._setLength(u+1),u},T.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},T.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},T.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(o(),!1,!0);var r=y(t,this);if(!(r instanceof T))return this._fulfill(t);var n=1|(e?4:0);this._propagateFrom(r,n);var i=r._target();if(i._isPending()){for(var u=this._length(),s=0;s<u;++s)i._migrateCallbacks(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},T.prototype._rejectCallback=function(t,e,r){r||s.markAsOriginatingFromRejection(t);var n=s.ensureErrorObject(t),o=n===t;this._attachExtraTrace(n,!!e&&o),this._reject(t,o?void 0:n)},T.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=O(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===R&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},T.prototype._settlePromiseFromHandler=function(t,e,r,n){var i;if(!n._isRejected())if(n._pushContext(),i=e!==h||this._isRejected()?O(t).call(e,r):O(t).apply(this._boundValue(),r),n._popContext(),i===R||i===n||i===_){var u=i===n?o():i.e;n._rejectCallback(u,!1,!0)}else n._resolveCallback(i)},T.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},T.prototype._followee=function(){return this._rejectionHandler0},T.prototype._setFollowee=function(t){this._rejectionHandler0=t},T.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},T.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},T.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},T.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},T.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof T;if(r&&e._isMigrated())return e._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var n=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,i=this._settledValue,u=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof n?r?this._settlePromiseFromHandler(n,u,i,e):n.call(u,i,e):u instanceof d?u._isResolved()||(this._isFulfilled()?u._promiseFulfilled(i,e):u._promiseRejected(i,e)):r&&(this._isFulfilled()?e._fulfill(i):e._reject(i,o)),t>=4&&4==(31&t)&&a.invokeLater(this._setLength,this,0)},T.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},T.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},T.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},T.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},T.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},T.prototype._fulfillUnchecked=function(t){if(t===this){var e=o();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},T.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},T.prototype._rejectUnchecked=function(t,e){if(t===this){var r=o();return this._attachExtraTrace(r),this._rejectUnchecked(r)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(v.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},T.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},s.notEnumerableProp(T,"_makeSelfResolutionError",o),n(17)(T,d),n(18)(T,f,y,u),n(19)(T,f,y),n(20)(T,_,y),n(21)(T),n(22)(T),n(23)(T,d,y,f),T.version="2.11.0",T.Promise=T,n(24)(T,d,u,y,f),n(25)(T),n(26)(T,u,y,m),n(27)(T,u,f,y),n(28)(T),n(29)(T),n(30)(T,d,y,u),n(31)(T,f,y,u),n(32)(T,d,u,y,f),n(33)(T,d),n(34)(T,d,u),n(35)(T,f),n(36)(T),n(37)(T,f),n(38)(T,f),n(39)(T,f),s.toFastProperties(T),s.toFastProperties(T.prototype),A({a:1}),A({b:2}),A({c:3}),A(1),A(function(){}),A(void 0),A(!1),A(new T(f)),v.setBounds(a.firstLineError,s.lastLineError),T}},function(t,r,n){"use strict";var o=n(5),i="undefined"==typeof navigator,u=function(){try{var t={};return o.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),s={e:{}},c;function a(){try{var t=c;return c=null,t.apply(this,arguments)}catch(t){return s.e=t,s}}function p(t){return c=t,a}var l=function(t,e){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=t,this.constructor$=e,e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}return n.prototype=e.prototype,t.prototype=new n,t.prototype};function f(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t){return!f(t)}function _(t){return f(t)?new Error(A(t)):t}function y(t,e){var r,n=t.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=t[r];return o[r]=e,o}function d(t,e,r){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(t,e,r){if(f(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,n),t}function g(t){throw t}var m=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(o.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var u;try{u=r(t)}catch(t){return n}for(var s=0;s<u.length;++s){var c=u[s];if(!i[c]){i[c]=!0;var a=Object.getOwnPropertyDescriptor(t,c);null!=a&&null==a.get&&null==a.set&&n.push(c)}}t=o.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var o=[];t:for(var i in r)if(n.call(r,i))o.push(i);else{for(var u=0;u<t.length;++u)if(n.call(t[u],i))continue t;o.push(i)}return o}}(),w=/this\s*\.\s*\S+\s*=/;function b(t){try{if("function"==typeof t){var e=o.names(t.prototype),r=o.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=w.test(t+"")&&o.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}}function E(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}var R=/^[a-z$_][a-z$_0-9]*$/i;function O(t){return R.test(t)}function T(t,e,r){for(var n=new Array(t),o=0;o<t;++o)n[o]=e+o+r;return n}function A(t){try{return t+""}catch(t){return"[no string representation]"}}function C(t){try{v(t,"isOperational",!0)}catch(t){}}function j(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function S(t){return t instanceof Error&&o.propertyIsWritable(t,"stack")}var k="stack"in new Error?function(t){return S(t)?t:new Error(A(t))}:function(t){if(S(t))return t;try{throw new Error(A(t))}catch(t){return t}};function I(t){return{}.toString.call(t)}function P(t,e,r){for(var n=o.names(t),i=0;i<n.length;++i){var u=n[i];if(r(u))try{o.defineProperty(e,u,o.getDescriptor(t,u))}catch(t){}}}var x={isClass:b,isIdentifier:O,inheritedDataKeys:m,getDataPropertyOrDefault:d,thrower:g,isArray:o.isArray,haveGetters:u,notEnumerableProp:v,isPrimitive:f,isObject:h,canEvaluate:i,errorObj:s,tryCatch:p,inherits:l,withAppended:y,maybeWrapAsError:_,toFastProperties:E,filledRange:T,toString:A,canAttachTrace:S,ensureErrorObject:k,originatesFromRejection:j,markAsOriginatingFromRejection:C,classString:I,copyDescriptors:P,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==e&&"[object process]"===I(e).toLowerCase()};x.isRecentNode=x.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),x.isNode&&x.toFastProperties(e);try{throw new Error}catch(t){x.lastLineError=t}t.exports=x},function(t,e){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var n={}.hasOwnProperty,o={}.toString,i={}.constructor.prototype,u=function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e};t.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:u,names:u,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return i}},isES5:r,propertyIsWritable:function(){return!0}}}},function(t,e,r){"use strict";var n;try{throw new Error}catch(t){n=t}var o=r(7),i=r(8),u=r(4);function s(){this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o.isStatic?o(this.drainQueues):o}function c(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function a(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function p(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},s.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},u.hasDevTools?(o.isStatic&&(o=function(t){setTimeout(t,0)}),s.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?c.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},s.prototype.invoke=function(t,e,r){this._trampolineEnabled?a.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},s.prototype.settlePromises=function(t){this._trampolineEnabled?p.call(this,t):this._schedule(function(){t._settlePromises()})}):(s.prototype.invokeLater=c,s.prototype.invoke=a,s.prototype.settlePromises=p),s.prototype.invokeFirst=function(t,e,r){this._normalQueue.unshift(t,e,r),this._queueTick()},s.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=new s,t.exports.firstLineError=n},function(t,r,i){"use strict";var u,s=i(4);if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,a=e.nextTick;u=s.isRecentNode?function(t){c.call(n,t)}:function(t){a.call(e,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?u=void 0!==o?function(t){o(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(u=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}).isStatic=!0;t.exports=u},function(t,e){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=(this._front-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},r.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},r.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=r,this._length=n},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,n,o){for(var i=0;i<o;++i)r[i+n]=t[i+e],t[i+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},t.exports=r},function(t,e,r){"use strict";var n,o,i=r(5),u=i.freeze,s=r(4),c=s.inherits,a=s.notEnumerableProp;function p(t,e){function r(n){if(!(this instanceof r))return new r(n);a(this,"message","string"==typeof n?n:e),a(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var l=p("Warning","warning"),f=p("CancellationError","cancellation error"),h=p("TimeoutError","timeout error"),_=p("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(t){n=p("TypeError","type error"),o=p("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),d=0;d<y.length;++d)"function"==typeof Array.prototype[y[d]]&&(_.prototype[y[d]]=Array.prototype[y[d]]);i.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var v=0;function g(t){if(!(this instanceof g))return new g(t);a(this,"name","OperationalError"),a(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(a(this,"message",t.message),a(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(n=o.join("\n"))+"\n"}return v--,e},c(g,Error);var m=Error.__BluebirdErrorTypes__;m||(m=u({CancellationError:f,TimeoutError:h,OperationalError:g,RejectionError:g,AggregateError:_}),a(Error,"__BluebirdErrorTypes__",m)),t.exports={Error:Error,TypeError:n,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:l}},function(t,e,r){"use strict";t.exports=function(t,e){var n=r(4),o=n.errorObj,i=n.isObject;function u(t){return t.then}var s={}.hasOwnProperty;return function(r,c){if(i(r)){if(r instanceof t)return r;if(function(t){return s.call(t,"_promise0")}(r)){var a=new t(e);return r._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a}var p=n.tryCatch(u)(r);if(p===o)return c&&c._pushContext(),a=t.reject(p.e),c&&c._popContext(),a;if("function"==typeof p)return function(r,i,u){var s=new t(e),c=s;u&&u._pushContext(),s._captureStackTrace(),u&&u._popContext();var a=!0,p=n.tryCatch(i).call(r,function(t){s&&(s._resolveCallback(t),s=null)},function(t){s&&(s._rejectCallback(t,a,!0),s=null)},function(t){s&&"function"==typeof s._progress&&s._progress(t)});return a=!1,s&&p===o&&(s._rejectCallback(p.e,!0,!0),s=null),c}(r,p,c)}return r}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(4).isArray;function u(r){var n,o=this._promise=new t(e);r instanceof t&&(n=r,o._propagateFrom(n,5)),this._values=r,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function e(r,u){var s=n(this._values,this._promise);if(s instanceof t){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(e,this._reject,void 0,this,u):void this._reject(s._reason());if(s=s._value(),!i(s)){var c=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(c)}}else if(!i(s))return void this._promise._reject(o("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==s.length){var a=this.getActualLength(s.length);this._length=a,this._values=this.shouldCopyValues()?new Array(a):this._values;for(var p=this._promise,l=0;l<a;++l){var f=this._isResolved(),h=n(s[l],p);h instanceof t?(h=h._target(),f?h._ignoreRejections():h._isPending()?h._proxyPromiseArray(this,l):h._isFulfilled()?this._promiseFulfilled(h._value(),l):this._promiseRejected(h._reason(),l)):f||this._promiseFulfilled(h,l)}}else-5===u?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(u))},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},u.prototype.__hardReject__=u.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},u.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},u.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},u.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(t){return t},u}},function(t,r,n){"use strict";t.exports=function(){var t,r=n(6),o=n(4),i=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,u=null,s=null,c=!1;function a(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);d(this,a),e>32&&this.uncycle()}function p(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],o=u.test(n)||"    (No stack trace)"===n,i=o&&f(n);o&&!i&&(c&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function l(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}o.inherits(a,Error),a.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,o=this;void 0!==o;++n)e.push(o),o=o._parent;for(n=(t=this._length=n)-1;n>=0;--n){var i=e[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<t;++n){var u=r[e[n].stack];if(void 0!==u&&u!==n){u>0&&(e[u-1]._parent=void 0,e[u-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var s=n>0?e[n-1]:this;u<t-1?(s._parent=e[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,a=n-2;a>=0;--a)e[a]._length=c,c++;return}}}},a.prototype.parent=function(){return this._parent},a.prototype.hasParent=function(){return void 0!==this._parent},a.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=a.parseStackAndMessage(t),r=e.message,n=[e.stack],i=this;void 0!==i;)n.push(p(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],o=e.length-1,i=e[o],u=-1,s=n.length-1;s>=0;--s)if(n[s]===i){u=s;break}for(var s=u;s>=0;--s){var c=n[s];if(e[o]!==c)break;e.pop(),o--}e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),o.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");r<e.length&&(e[r]=e[r].join("\n"));return t+"\n"+e.join("\n")}(r,n)),o.notEnumerableProp(t,"__stackCleaned__",!0)}},a.parseStackAndMessage=function(t){var e=t.stack;return{message:t.toString(),stack:p(e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||u.test(n))break}return r>0&&(e=e.slice(r)),e}(t):["    (No stack trace)"])}},a.formatAndLogError=function(e,r){if("undefined"!=typeof console){var n;if("object"==typeof e||"function"==typeof e){var o=e.stack;n=r+s(o,e)}else n=r+String(e);"function"==typeof t?t(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},a.unhandledRejection=function(t){a.formatAndLogError(t,"^--- With additional stack trace: ")},a.isSupported=function(){return"function"==typeof d},a.fireRejectionEvent=function(t,e,n,o){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(o):e(n,o))}catch(t){r.throwLater(t)}var u=!1;try{u=v(t,n,o)}catch(t){u=!0,r.throwLater(t)}var s=!1;if(y)try{s=y(t.toLowerCase(),{reason:n,promise:o})}catch(t){s=!0,r.throwLater(t)}u||i||s||"unhandledRejection"!==t||a.formatAndLogError(n,"Unhandled rejection ")};var f=function(){return!1},h=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function _(t){var e=t.match(h);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}a.setBounds=function(t,e){if(a.isSupported()){for(var r,n,o=t.stack.split("\n"),u=e.stack.split("\n"),s=-1,c=-1,p=0;p<o.length;++p){if(l=_(o[p])){r=l.fileName,s=l.line;break}}for(p=0;p<u.length;++p){var l;if(l=_(u[p])){n=l.fileName,c=l.line;break}}s<0||c<0||!r||!n||r!==n||s>=c||(f=function(t){if(i.test(t))return!0;var e=_(t);return!!(e&&e.fileName===r&&s<=e.line&&e.line<=c)})}};var y,d=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():l(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,u=t,s=e;var r=Error.captureStackTrace;return f=function(t){return i.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return u=/@/,s=e,c=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return"stack"in o||!n||"number"!=typeof Error.stackTraceLimit?(s=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?l(e):e.toString()},null):(u=t,s=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),v=function(){if(o.isNode)return function(t,r,n){return"rejectionHandled"===t?e.emit(t,n):e.emit(t,r,n)};var t=!1,r=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(t){}if(!t)try{var i=document.createEvent("CustomEvent");i.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(i)}catch(t){r=!1}r&&(y=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,r),!!n&&!self.dispatchEvent(n)});var u={};return u.unhandledRejection="onunhandledRejection".toLowerCase(),u.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=u[t],o=self[n];return!!o&&("rejectionHandled"===t?o.call(self,r):o.call(self,e,r),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(t=function(t){console.warn(t)},o.isNode&&e.stderr.isTTY?t=function(t){e.stderr.write("[31m"+t+"[39m\n")}:o.isNode||"string"!=typeof(new Error).stack||(t=function(t){console.warn("%c"+t,"color: red")})),a}},function(t,r,n){"use strict";t.exports=function(t,r){var o,i,u=t._getDomain,s=n(6),c=n(9).Warning,a=n(4),p=a.canAttachTrace,l=a.isNode&&(!!e.env.BLUEBIRD_DEBUG||!1);return a.isNode&&0==e.env.BLUEBIRD_DEBUG&&(l=!1),l&&s.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",o,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",i,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(){return l&&(this._trace=new r(this._peekContext())),this},t.prototype._attachExtraTrace=function(t,e){if(l&&p(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var o=r.parseStackAndMessage(t);a.notEnumerableProp(t,"stack",o.message+"\n"+o.stack.join("\n")),a.notEnumerableProp(t,"__stackCleaned__",!0)}}},t.prototype._warn=function(t){var e=new c(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var o=r.parseStackAndMessage(e);e.stack=o.message+"\n"+o.stack.join("\n")}r.formatAndLogError(e,"")},t.onPossiblyUnhandledRejection=function(t){var e=u();i="function"==typeof t?null===e?t:e.bind(t):void 0},t.onUnhandledRejectionHandled=function(t){var e=u();o="function"==typeof t?null===e?t:e.bind(t):void 0},t.longStackTraces=function(){if(s.haveItemsQueued()&&!1===l)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(l=r.isSupported())&&s.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return l&&r.isSupported()},r.isSupported()||(t.longStackTraces=function(){},l=!1),function(){return l}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=[];function o(){this._trace=new e(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return o.prototype._pushContext=function(){r()&&void 0!==this._trace&&n.push(this._trace)},o.prototype._popContext=function(){r()&&void 0!==this._trace&&n.pop()},t.prototype._peekContext=i,t.prototype._pushContext=o.prototype._pushContext,t.prototype._popContext=o.prototype._popContext,function(){if(r())return new o}}},function(t,e,r){"use strict";t.exports=function(t){var e=r(4),n=r(9),o=e.tryCatch,i=e.errorObj,u=r(5).keys,s=n.TypeError;function c(t,e,r){this._instances=t,this._callback=e,this._promise=r}function a(t,e){var r={},n=o(t).call(r,e);return n===i?n:u(r).length?(i.e=new s("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),i):n}return c.prototype.doFilter=function(e){for(var r=this._callback,n=this._promise._boundValue(),u=0,s=this._instances.length;u<s;++u){var c=this._instances[u],p=c===Error||null!=c&&c.prototype instanceof Error;if(p&&e instanceof c)return(l=o(r).call(n,e))===i?(t.e=l.e,t):l;if("function"==typeof c&&!p){var l,f=a(c,e);if(f===i){e=i.e;break}if(f)return(l=o(r).call(n,e))===i?(t.e=l.e,t):l}}return t.e=e,t},c}},function(t,e,r){"use strict";var n=r(4),o=n.maybeWrapAsError,i=r(9),u=i.TimeoutError,s=i.OperationalError,c=n.haveGetters,a=r(5);var p,l=/^(?:name|message|stack|cause)$/;function f(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new s(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var r=a.keys(t),o=0;o<r.length;++o){var i=r[o];l.test(i)||(e[i]=t[i])}return e}return n.markAsOriginatingFromRejection(t),t}function h(t){return function(e,r){if(null!==t){if(e){var n=f(o(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var i=arguments.length,u=new Array(i-1),s=1;s<i;++s)u[s-1]=arguments[s];t._fulfill(u)}else t._fulfill(r);t=null}}}if(p=c?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=h(t),this.callback=this.asCallback},c){var _={get:function(){return h(this.promise)}};a.defineProperty(p.prototype,"asCallback",_),a.defineProperty(p.prototype,"callback",_)}p._nodebackForPromise=h,p.prototype.toString=function(){return"[object PromiseResolver]"},p.prototype.resolve=p.prototype.fulfill=function(t){if(!(this instanceof p))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},p.prototype.reject=function(t){if(!(this instanceof p))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},p.prototype.progress=function(t){if(!(this instanceof p))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},p.prototype.cancel=function(t){this.promise.cancel(t)},p.prototype.timeout=function(){this.reject(new u("timeout"))},p.prototype.isResolved=function(){return this.promise.isResolved()},p.prototype.toJSON=function(){return this.promise.toJSON()},t.exports=p},function(t,e,r){"use strict";t.exports=function(t,e){var n=r(4),o=r(6),i=n.tryCatch,u=n.errorObj;t.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},t.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},t.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},t.prototype._doProgressWith=function(e){var r=e.value,o=e.handler,s=e.promise,c=e.receiver,a=i(o).call(c,r);if(a===u){if(null!=a.e&&"StopProgressPropagation"!==a.e.name){var p=n.canAttachTrace(a.e)?a.e:new Error(n.toString(a.e));s._attachExtraTrace(p),s._progress(a.e)}}else a instanceof t?a._then(s._progress,null,null,s,void 0):s._progress(a)},t.prototype._progressUnchecked=function(r){for(var n=this._length(),i=this._progress,u=0;u<n;u++){var s=this._progressHandlerAt(u),c=this._promiseAt(u);if(c instanceof t)"function"==typeof s?o.invoke(this._doProgressWith,this,{handler:s,promise:c,receiver:this._receiverAt(u),value:r}):o.invoke(i,c,r);else{var a=this._receiverAt(u);"function"==typeof s?s.call(a,r,c):a instanceof e&&!a._isResolved()&&a._promiseProgressed(r,c)}}}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(4),u=i.tryCatch;t.method=function(r){if("function"!=typeof r)throw new t.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new t(e);n._captureStackTrace(),n._pushContext();var o=u(r).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(r,n,s){if("function"!=typeof r)return o("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var c=new t(e);c._captureStackTrace(),c._pushContext();var a=i.isArray(n)?u(r).apply(s,n):u(r).call(s,n);return c._popContext(),c._resolveFromSyncValue(a),c},t.prototype._resolveFromSyncValue=function(t){t===i.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=function(t,e){this._reject(e)},o=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},i=function(t,e){this._isPending()&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var s=r(n),c=new t(e);c._propagateFrom(this,1);var a=this._target();if(c._setBoundTo(s),s instanceof t){var p={promiseRejectionQueued:!1,promise:c,target:a,bindingPromise:s};a._then(e,o,c._progress,c,p),s._then(i,u,c._progress,c,p)}else c._resolveCallback(a);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(n,o){var i=r(n),u=new t(e);return u._setBoundTo(i),i instanceof t?i._then(function(){u._resolveCallback(o)},u._reject,u._progress,u,null):u._resolveCallback(o),u}}},function(t,e,r){"use strict";t.exports=function(t,e,n){var o=r(4),i=o.isPrimitive,u=o.thrower;function s(){return this}function c(){throw this}function a(t,e,r){var n;return n=i(e)?r?function(t){return function(){return t}}(e):function(t){return function(){throw t}}(e):r?s:c,t._then(n,u,void 0,e,void 0)}function p(r){var o=this.promise,i=this.handler,u=o._isBound()?i.call(o._boundValue()):i();if(void 0!==u){var s=n(u,o);if(s instanceof t)return a(s=s._target(),r,o.isFulfilled())}return o.isRejected()?(e.e=r,e):r}function l(e){var r=this.promise,o=this.handler,i=r._isBound()?o.call(r._boundValue(),e):o(e);if(void 0!==i){var u=n(i,r);if(u instanceof t)return a(u=u._target(),e,!0)}return e}t.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?p:l,e?p:void 0,void 0,r,void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThroughHandler(t,!0)},t.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},function(t,e,r){"use strict";var n=r(4).isPrimitive;t.exports=function(t){var e=function(){return this},r=function(){throw this},o=function(){},i=function(){throw void 0},u=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(r){return void 0===r?this.then(o):n(r)?this._then(u(r,2),void 0,void 0,void 0,void 0):(r instanceof t&&r._ignoreRejections(),this._then(e,void 0,void 0,r,void 0))},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(i):n(t)?this._then(u(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},function(t,e){"use strict";t.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(4),u=i.canEvaluate,s=i.tryCatch,c=i.errorObj;if(u){for(var a=function(t){return new Function("value","holder","                             \n\t            'use strict';                                                    \n\t            holder.pIndex = value;                                           \n\t            holder.checkFulfillment(this);                                   \n\t            ".replace(/Index/g,t))},p=function(t){for(var e=[],r=1;r<=t;++r)e.push("holder.p"+r);return new Function("holder","                                      \n\t            'use strict';                                                    \n\t            var callback = holder.fn;                                        \n\t            return callback(values);                                         \n\t            ".replace(/values/g,e.join(", ")))},l=[],f=[void 0],h=1;h<=5;++h)l.push(a(h)),f.push(p(h));var _=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};_.prototype.callers=f,_.prototype.checkFulfillment=function(t){var e=this.now;e++;var r=this.total;if(e>=r){var n=this.callers[r];t._pushContext();var o=s(n)(this);t._popContext(),o===c?t._rejectCallback(o.e,!1,!0):t._resolveCallback(o)}else this.now=e};var y=function(t){this._reject(t)}}t.join=function(){var r,i=arguments.length-1;if(i>0&&"function"==typeof arguments[i]&&(r=arguments[i],i<6&&u)){(v=new t(o))._captureStackTrace();for(var s=new _(i,r),c=l,a=0;a<i;++a){var p=n(arguments[a],v);p instanceof t?(p=p._target())._isPending()?p._then(c[a],y,void 0,v,s):p._isFulfilled()?c[a].call(v,p._value(),s):v._reject(p._reason()):c[a].call(v,p,s)}return v}for(var f=arguments.length,h=new Array(f),d=0;d<f;++d)h[d]=arguments[d];r&&h.pop();var v=new e(h).promise();return void 0!==r?v.spread(r):v}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o,i){var u=t._getDomain,s=r(6),c=r(4),a=c.tryCatch,p=c.errorObj,l={},f=[];function h(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var o=u();this._callback=null===o?e:o.bind(e),this._preservedValues=n===i?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:f,s.invoke(_,this,void 0)}function _(){this._init$(void 0,-2)}function y(t,e,r,n){var o="object"==typeof r&&null!==r?r.concurrency:0;return new h(t,e,o="number"==typeof o&&isFinite(o)&&o>=1?o:0,n)}c.inherits(h,e),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),u=this._preservedValues,s=this._limit;if(n[r]===l){if(n[r]=e,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(s>=1&&this._inFlight>=s)return n[r]=e,void this._queue.push(r);null!==u&&(u[r]=e);var c=this._callback,f=this._promise._boundValue();this._promise._pushContext();var h=a(c).call(f,e,r,i);if(this._promise._popContext(),h===p)return this._reject(h.e);var _=o(h,this._promise);if(_ instanceof t){if((_=_._target())._isPending())return s>=1&&this._inFlight++,n[r]=l,_._proxyPromiseArray(this,r);if(!_._isFulfilled())return this._reject(_._reason());h=_._value()}n[r]=h}++this._totalResolved>=i&&(null!==u?this._filter(n,u):this._resolve(n))},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},h.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),o=0,i=0;i<r;++i)t[i]&&(n[o++]=e[i]);n.length=o,this._resolve(n)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):y(this,t,e,null).promise()},t.map=function(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):y(t,e,r,o).promise()}}},function(t,e,r){"use strict";t.exports=function(t){var e=r(9),n=r(6),o=e.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},t.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new o),n.invokeLater(this._cancel,this,t),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},t.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(9).TypeError,u=r(4).inherits,s=t.PromiseInspection;function c(e){for(var r=e.length,n=0;n<r;++n){var o=e[n];if(o.isRejected())return t.reject(o.error());e[n]=o._settledValue}return e}function a(t){setTimeout(function(){throw t},0)}function p(e,r){var o=0,i=e.length,u=t.defer();return function s(){if(o>=i)return u.resolve();var c=function(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(t){return a(t)}if(c instanceof t)return c._then(s,a,null,null,null)}s()}(),u.promise}function l(t){var e=new s;return e._settledValue=t,e._bitField=268435456,p(this,e).thenReturn(t)}function f(t){var e=new s;return e._settledValue=t,e._bitField=134217728,p(this,e).thenThrow(t)}function h(t,e,r){this._data=t,this._promise=e,this._context=r}function _(t,e,r){this.constructor$(t,e,r)}function y(t){return h.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}h.prototype.data=function(){return this._data},h.prototype.promise=function(){return this._promise},h.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},h.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},h.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},u(_,h),_.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},t.using=function(){var r=arguments.length;if(r<2)return e("you must pass at least 2 arguments to Promise.using");var o,i=arguments[r-1];if("function"!=typeof i)return e("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=!0;2===r&&Array.isArray(arguments[0])?(r=(o=arguments[0]).length,u=!1):(o=arguments,r--);for(var s=new Array(r),a=0;a<r;++a){var p=o[a];if(h.isDisposer(p)){var _=p;(p=p.promise())._setDisposable(_)}else{var d=n(p);d instanceof t&&(p=d._then(y,null,null,{resources:s,index:a},void 0))}s[a]=p}var v=t.settle(s).then(c).then(function(t){var e;v._pushContext();try{e=u?i.apply(void 0,t):i.call(void 0,t)}finally{v._popContext()}return e})._then(l,f,void 0,s,void 0);return s.promise=v,v},t.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new _(t,this,o());throw new i}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(9).TypeError,u=r(4),s=u.errorObj,c=u.tryCatch,a=[];function p(e,r,o,i){(this._promise=new t(n))._captureStackTrace(),this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(a):a}p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},p.prototype._continue=function(e){if(e===s)return this._promise._rejectCallback(e.e,!1,!0);var r=e.value;if(!0===e.done)this._promise._resolveCallback(r);else{var n=o(r,this._promise);if(!(n instanceof t)&&null===(n=function(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var u=c(r[i])(e);if(n._popContext(),u===s){n._pushContext();var a=t.reject(s.e);return n._popContext(),a}var p=o(u,n);if(p instanceof t)return p}return null}(n,this._yieldHandlers,this._promise)))return void this._throw(new i("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},p.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=c(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._next=function(t){this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},t.coroutine=function(t,e){if("function"!=typeof t)throw new i("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=p,o=(new Error).stack;return function(){var e=t.apply(this,arguments),i=new n(void 0,void 0,r,o);return i._generator=e,i._next(void 0),i.promise()}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");a.push(t)},t.spawn=function(r){if("function"!=typeof r)return e("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new p(r,this),o=n.promise();return n._run(t.spawn),o}}},function(t,e,r){"use strict";t.exports=function(t){var e=r(4),n=r(6),o=e.tryCatch,i=e.errorObj;function u(t,r){if(!e.isArray(t))return s.call(this,t,r);var u=o(r).apply(this._boundValue(),[null].concat(t));u===i&&n.throwLater(u.e)}function s(t,e){var r=this._boundValue(),u=void 0===t?o(e).call(r,null):o(e).call(r,null,t);u===i&&n.throwLater(u.e)}function c(t,e){if(!t){var r=this._target()._getCarriedStackTrace();r.cause=t,t=r}var u=o(e).call(this._boundValue(),t);u===i&&n.throwLater(u.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var r=s;void 0!==e&&Object(e).spread&&(r=u),this._then(r,c,void 0,this,t)}return this}}},function(t,e,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){var e,n,u=r(4),s=u.canEvaluate,c=u.isIdentifier,a=function(t){return new Function("ensureMethod","                                    \n\t        return function(obj) {                                               \n\t            'use strict'                                                     \n\t            var len = this.length;                                           \n\t            ensureMethod(obj, 'methodName');                                 \n\t            switch(len) {                                                    \n\t                case 1: return obj.methodName(this[0]);                      \n\t                case 2: return obj.methodName(this[0], this[1]);             \n\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \n\t                case 0: return obj.methodName();                             \n\t                default:                                                     \n\t                    return obj.methodName.apply(obj, this);                  \n\t            }                                                                \n\t        };                                                                   \n\t        ".replace(/methodName/g,t))(f)},p=function(t){return new Function("obj","                                             \n\t        'use strict';                                                        \n\t        return obj.propertyName;                                             \n\t        ".replace("propertyName",t))},l=function(t,e,r){var n=r[t];if("function"!=typeof n){if(!c(t))return null;if(n=e(t),r[t]=n,r[" size"]++,r[" size"]>512){for(var o=Object.keys(r),i=0;i<256;++i)delete r[o[i]];r[" size"]=o.length-256}}return n};function f(e,r){var n;if(null!=e&&(n=e[r]),"function"!=typeof n){var o="Object "+u.classString(e)+" has no method '"+u.toString(r)+"'";throw new t.TypeError(o)}return n}function h(t){return f(t,this.pop()).apply(t,this)}function _(t){return t[this]}function y(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e=function(t){return l(t,a,o)},n=function(t){return l(t,p,i)},t.prototype.call=function(t){for(var r=arguments.length,n=new Array(r-1),o=1;o<r;++o)n[o-1]=arguments[o];if(s){var i=e(t);if(null!==i)return this._then(i,void 0,void 0,n,void 0)}return n.push(t),this._then(h,void 0,void 0,n,void 0)},t.prototype.get=function(t){var e;if("number"==typeof t)e=y;else if(s){var r=n(t);e=null!==r?r:_}else e=_;return this._then(e,void 0,void 0,t,void 0)}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(4),u=i.isObject,s=r(5);function c(t){for(var e=s.keys(t),r=e.length,n=new Array(2*r),o=0;o<r;++o){var i=e[o];n[o]=t[i],n[o+r]=i}this.constructor$(n)}function a(e){var r,i=n(e);return u(i)?(r=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new c(i).promise(),i instanceof t&&r._propagateFrom(i,4),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}i.inherits(c,e),c.prototype._init=function(){this._init$(void 0,-3)},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var r={},n=this.length(),o=0,i=this.length();o<i;++o)r[this._values[o+n]]=this._values[o];this._resolve(r)}},c.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return a(this)},t.props=function(t){return a(t)}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o){var i=r(4).isArray,u=function(t){return t.then(function(e){return s(e,t)})};function s(r,s){var c=n(r);if(c instanceof t)return u(c);if(!i(r))return o("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var a=new t(e);void 0!==s&&a._propagateFrom(s,5);for(var p=a._fulfill,l=a._reject,f=0,h=r.length;f<h;++f){var _=r[f];(void 0!==_||f in r)&&t.cast(_)._then(p,l,void 0,a,null)}return a}t.race=function(t){return s(t,void 0)},t.prototype.race=function(){return s(this,void 0)}}},function(t,e,r){"use strict";t.exports=function(t,e,n,o,i){var u=t._getDomain,s=r(6),c=r(4),a=c.tryCatch,p=c.errorObj;function l(e,r,n,c){this.constructor$(e),this._promise._captureStackTrace(),this._preservedValues=c===i?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=o(n,this._promise),p=!1,l=a instanceof t;l&&((a=a._target())._isPending()?a._proxyPromiseArray(this,-1):a._isFulfilled()?(n=a._value(),this._gotAccum=!0):(this._reject(a._reason()),p=!0)),l||this._zerothIsAccum||(this._gotAccum=!0);var h=u();this._callback=null===h?r:h.bind(r),this._accum=n,p||s.invoke(f,this,void 0)}function f(){this._init$(void 0,-5)}function h(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new l(t,e,r,o).promise()}c.inherits(l,e),l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},l.prototype._promiseFulfilled=function(e,r){var n=this._values;n[r]=e;var i,u=this.length(),s=this._preservedValues,c=null!==s,l=this._gotAccum,f=this._valuesPhase;if(!f)for(f=this._valuesPhase=new Array(u),i=0;i<u;++i)f[i]=0;if(i=f[r],0===r&&this._zerothIsAccum?(this._accum=e,this._gotAccum=l=!0,f[r]=0===i?1:2):-1===r?(this._accum=e,this._gotAccum=l=!0):0===i?f[r]=1:(f[r]=2,this._accum=e),l){for(var h,_=this._callback,y=this._promise._boundValue(),d=this._reducingIndex;d<u;++d)if(2!==(i=f[d])){if(1!==i)return;if(e=n[d],this._promise._pushContext(),c?(s.push(e),h=a(_).call(y,e,d,u)):h=a(_).call(y,this._accum,e,d,u),this._promise._popContext(),h===p)return this._reject(h.e);var v=o(h,this._promise);if(v instanceof t){if((v=v._target())._isPending())return f[d]=4,v._proxyPromiseArray(this,d);if(!v._isFulfilled())return this._reject(v._reason());h=v._value()}this._reducingIndex=d+1,this._accum=h}else this._reducingIndex=d+1;this._resolve(c?s:this._accum)}},t.prototype.reduce=function(t,e){return h(this,t,e,null)},t.reduce=function(t,e,r,n){return h(t,e,r,n)}}},function(t,e,r){"use strict";t.exports=function(t,e){var n=t.PromiseInspection;function o(t){this.constructor$(t)}r(4).inherits(o,e),o.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},o.prototype._promiseFulfilled=function(t,e){var r=new n;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},o.prototype._promiseRejected=function(t,e){var r=new n;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},t.settle=function(t){return new o(t).promise()},t.prototype.settle=function(){return new o(this).promise()}}},function(t,e,r){"use strict";t.exports=function(t,e,n){var o=r(4),i=r(9).RangeError,u=r(9).AggregateError,s=o.isArray;function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function a(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new c(t),o=r.promise();return r.setHowMany(e),r.init(),o}o.inherits(c,e),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},c.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new i(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return a(t,e)},t.prototype.some=function(t){return a(this,t)},t._SomePromiseArray=c}},function(t,e,r){"use strict";t.exports=function(t,e){var n={},o=r(4),i=r(16)._nodebackForPromise,u=o.withAppended,s=o.maybeWrapAsError,c=o.canEvaluate,a=r(9).TypeError,p={__isPromisified__:!0},l=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),f=function(t){return o.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function h(t){return!l.test(t)}function _(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function y(t,e,r){var n=o.getDataPropertyOrDefault(t,e+r,p);return!!n&&_(n)}function d(t,e,r,n){for(var i=o.inheritedDataKeys(t),u=[],s=0;s<i.length;++s){var c=i[s],p=t[c],l=n===f||f(c,p,t);"function"!=typeof p||_(p)||y(t,c,e)||!n(c,p,t,l)||u.push(c,p)}return function(t,e,r){for(var n=0;n<t.length;n+=2){var o=t[n];if(r.test(o))for(var i=o.replace(r,""),u=0;u<t.length;u+=2)if(t[u]===i)throw new a("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}(u,e,r),u}var v=function(t){return t.replace(/([$])/,"\\$")},g=function(t){return o.filledRange(t,"_arg","")};var m=c?function(r,c,a,p){var l=Math.max(0,function(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}(p)-1),f=function(t){for(var e=[t],r=Math.max(0,t-1-3),n=t-1;n>=r;--n)e.push(n);for(n=t+1;n<=3;++n)e.push(n);return e}(l),h="string"==typeof r||c===n;function _(t){var e=g(t).join(", "),r=t>0?", ":"";return(h?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===c?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",e).replace(", ",r)}var y="string"==typeof r?"this != null ? this['"+r+"'] : fn":"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n\t        var ret = function (Parameters) {                                    \n\t            'use strict';                                                    \n\t            var len = arguments.length;                                      \n\t            var promise = new Promise(INTERNAL);                             \n\t            promise._captureStackTrace();                                    \n\t            var nodeback = nodebackForPromise(promise);                      \n\t            var ret;                                                         \n\t            var callback = tryCatch([GetFunctionCode]);                      \n\t            switch(len) {                                                    \n\t                [CodeForSwitchCase]                                          \n\t            }                                                                \n\t            if (ret === errorObj) {                                          \n\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n\t            }                                                                \n\t            return promise;                                                  \n\t        };                                                                   \n\t        notEnumerableProp(ret, '__isPromisified__', true);                   \n\t        return ret;                                                          \n\t        ".replace("Parameters",function(t){return o.filledRange(Math.max(t,3),"_arg","")}(l)).replace("[CodeForSwitchCase]",function(){for(var t="",e=0;e<f.length;++e)t+="case "+f[e]+":"+_(f[e]);return t+="                                                             \n\t        default:                                                             \n\t            var args = new Array(len + 1);                                   \n\t            var i = 0;                                                       \n\t            for (var i = 0; i < len; ++i) {                                  \n\t               args[i] = arguments[i];                                       \n\t            }                                                                \n\t            args[i] = nodeback;                                              \n\t            [CodeForCall]                                                    \n\t            break;                                                           \n\t        ".replace("[CodeForCall]",h?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",y))(t,p,c,u,s,i,o.tryCatch,o.errorObj,o.notEnumerableProp,e)}:function(r,c,a,p){var l=function(){return this}(),f=r;function h(){var o=c;c===n&&(o=this);var a=new t(e);a._captureStackTrace();var p="string"==typeof f&&this!==l?this[f]:r,h=i(a);try{p.apply(o,u(arguments,h))}catch(t){a._rejectCallback(s(t),!0,!0)}return a}return"string"==typeof f&&(r=p),o.notEnumerableProp(h,"__isPromisified__",!0),h};function w(t,e,r,i){for(var u=new RegExp(v(e)+"$"),s=d(t,e,u,r),c=0,a=s.length;c<a;c+=2){var p=s[c],l=s[c+1],f=p+e;if(i===m)t[f]=m(p,n,p,l,e);else{var h=i(l,function(){return m(p,n,p,l,e)});o.notEnumerableProp(h,"__isPromisified__",!0),t[f]=h}}return o.toFastProperties(t),t}t.promisify=function(t,e){if("function"!=typeof t)throw new a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(_(t))return t;var r=function(t,e){return m(t,e,void 0,t)}(t,arguments.length<2?n:e);return o.copyDescriptors(t,r,h),r},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new a("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var r=(e=Object(e)).suffix;"string"!=typeof r&&(r="Async");var n=e.filter;"function"!=typeof n&&(n=f);var i=e.promisifier;if("function"!=typeof i&&(i=m),!o.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var u=o.inheritedDataKeys(t),s=0;s<u.length;++s){var c=t[u[s]];"constructor"!==u[s]&&o.isClass(c)&&(w(c.prototype,r,n,i),w(c,r,n,i))}return w(t,r,n,i)}}},function(t,e){"use strict";t.exports=function(t){var e=t._SomePromiseArray;function r(t){var r=new e(t),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}t.any=function(t){return r(t)},t.prototype.any=function(){return r(this)}}},function(t,e){"use strict";t.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},function(t,e,r){"use strict";t.exports=function(t,e){var n=r(4),o=t.TimeoutError,i=function(t){return u(+this).thenReturn(t)},u=t.delay=function(r,n){if(void 0===n){n=r,r=void 0;var o=new t(e);return setTimeout(function(){o._fulfill()},n),o}return n=+n,t.resolve(r)._then(i,null,null,n,void 0)};function s(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function c(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}t.prototype.delay=function(t){return u(this,t)},t.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var i=setTimeout(function(){!function(t,e){var r;t.isPending()&&(!n.isPrimitive(e)&&e instanceof Error?r=e:("string"!=typeof e&&(e="operation timed out"),r=new o(e)),n.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r))}(r,e)},t);return r._then(s,c,void 0,i,void 0)}}},function(t,e){"use strict";t.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,o){return r(t,n,o,e)}}},function(t,e,r){var n,o,i;o=r(41),i=r(51),n=r(48),i.connect=o.connect,i.Error=n,i._bluebird=r(2),t.exports=i},function(t,r,n){var o,u,s,c,a,p,l,f,h,_,y,d,v,g,m,w,b,E,R,O,T,A,C=function(t,e){for(var r in e)j.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},j={}.hasOwnProperty;v=n(42),O=n(45),_=n(46),T=n(47),h=n(48),f=n(50),E=n(49),b=E.VersionDummy.Version.V0_4,g=E.VersionDummy.Protocol.JSON,m=E.Query.QueryType,w=E.Response.ResponseType,R=n(51),a=n(2),l=T.ar,A=T.varar,T.aropt,y=T.mkAtom,d=T.mkErr,s="SUCCESS",u="ERROR: Incorrect authorization key.\n",o=function(t){function e(t,e){var r,n;void 0===t?t={}:"string"==typeof t&&(t={host:t}),this.host=t.host||this.DEFAULT_HOST,this.port=t.port||this.DEFAULT_PORT,this.db=t.db,this.authKey=t.authKey||this.DEFAULT_AUTH_KEY,this.timeout=t.timeout||this.DEFAULT_TIMEOUT,"boolean"==typeof t.ssl&&t.ssl?this.ssl={}:"object"==typeof t.ssl?this.ssl=t.ssl:this.ssl=!1,this.outstandingCallbacks={},this.nextToken=1,this.open=!1,this.closing=!1,this.buffer=new i(0),this._events=this._events||{},n=function(t){return function(n){return t.removeListener("connect",r),n instanceof h.ReqlError?e(n):e(new h.ReqlDriverError("Could not connect to "+t.host+":"+t.port+".\n"+n.message))}}(this),this.once("error",n),r=function(t){return function(){return t.removeListener("error",n),t.open=!0,e(null,t)}}(this),this.once("connect",r),this._closePromise=null}return C(e,t),e.prototype.DEFAULT_HOST="localhost",e.prototype.DEFAULT_PORT=28015,e.prototype.DEFAULT_AUTH_KEY="",e.prototype.DEFAULT_TIMEOUT=20,e.prototype._data=function(t){var e,r,n,o,u;for(this.buffer=i.concat([this.buffer,t]),o=[];this.buffer.length>=12&&(u=this.buffer.readUInt32LE(0)+4294967296*this.buffer.readUInt32LE(4),n=this.buffer.readUInt32LE(8),this.buffer.length>=12+n);)r=this.buffer.slice(12,n+12),e=JSON.parse(r),this._processResponse(e,u),o.push(this.buffer=this.buffer.slice(12+n));return o},e.prototype._delQuery=function(t){return delete this.outstandingCallbacks[t]},e.prototype._processResponse=function(t,e){var r,n,o,i,u,s,c,a,p,l;if(c=t.p,null!=this.outstandingCallbacks[e])if(r=(a=this.outstandingCallbacks[e]).cb,l=a.root,n=a.cursor,s=a.opts,a.feed,null!=n){if(n._addResponse(t),n._endFlag&&0===n._outstandingRequests)return this._delQuery(e)}else if(null!=r)switch(t.t){case w.COMPILE_ERROR:return r(d(h.ReqlServerCompileError,t,l)),this._delQuery(e);case w.CLIENT_ERROR:return r(d(h.ReqlDriverError,t,l)),this._delQuery(e);case w.RUNTIME_ERROR:return o=T.errorClass(t.e),r(d(o,t,l)),this._delQuery(e);case w.SUCCESS_ATOM:return t=y(t,s),Array.isArray(t)&&(t=f.makeIterable(t)),null!=c&&(t={profile:c,value:t}),r(null,t),this._delQuery(e);case w.SUCCESS_PARTIAL:for(n=null,i=0,u=(p=t.n).length;i<u;i++)switch(p[i]){case E.Response.ResponseNote.SEQUENCE_FEED:null==n&&(n=new f.Feed(this,e,s,l));break;case E.Response.ResponseNote.UNIONED_FEED:null==n&&(n=new f.UnionedFeed(this,e,s,l));break;case E.Response.ResponseNote.ATOM_FEED:null==n&&(n=new f.AtomFeed(this,e,s,l));break;case E.Response.ResponseNote.ORDER_BY_LIMIT_FEED:null==n&&(n=new f.OrderByLimitFeed(this,e,s,l))}return null==n&&(n=new f.Cursor(this,e,s,l)),this.outstandingCallbacks[e].cursor=n,r(null,null!=c?{profile:c,value:n._addResponse(t)}:n._addResponse(t));case w.SUCCESS_SEQUENCE:return n=new f.Cursor(this,e,s,l),this._delQuery(e),r(null,null!=c?{profile:c,value:n._addResponse(t)}:n._addResponse(t));case w.WAIT_COMPLETE:return this._delQuery(e),r(null,null);case w.SERVER_INFO:return this._delQuery(e),r(null,t=y(t,s));default:return r(new h.ReqlDriverError("Unknown response type"))}},e.prototype.close=A(0,2,function(t,e){var r,n,o,i;if(null!=e){if(i=t,"[object Object]"!==Object.prototype.toString.call(i))throw new h.ReqlDriverError("First argument to two-argument `close` must be an object.");r=e}else"[object Object]"===Object.prototype.toString.call(t)?(i=t,r=null):"function"==typeof t?(i={},r=t):(i=t,r=null);for(n in i)if(j.call(i,n)&&"noreplyWait"!==n)throw new h.ReqlDriverError("First argument to two-argument `close` must be { noreplyWait: <bool> }.");return null!=this._closePromise?this._closePromise.nodeify(r):(this.closing=!0,o=(null==i.noreplyWait||i.noreplyWait)&&this.open,this._closePromise=new a(function(t){return function(e,r){var n;return n=function(n,o){return t.open=!1,t.closing=!1,t.cancel(),null!=n?r(n):e(o)},o?t.noreplyWait(n):n()}}(this)).nodeify(r))}),e.prototype.noreplyWait=A(0,1,function(t){var e,r;return this.open?(r=this.nextToken++,(e={}).type=m.NOREPLY_WAIT,e.token=r,new a(function(t){return function(n,o){var i;return i=function(t,e){return t?o(t):n(e)},t.outstandingCallbacks[r]={cb:i,root:null,opts:null},t._sendQuery(e)}}(this)).nodeify(t)):new a(function(t,e){return e(new h.ReqlDriverError("Connection is closed."))}).nodeify(t)}),e.prototype.server=A(0,1,function(t){var e,r;return this.open?(r=this.nextToken++,(e={}).type=m.SERVER_INFO,e.token=r,new a(function(t){return function(n,o){var i;return i=function(t,e){return t?o(t):n(e)},t.outstandingCallbacks[r]={cb:i,root:null,opts:null},t._sendQuery(e)}}(this)).nodeify(t)):new a(function(t,e){return e(new h.ReqlDriverError("Connection is closed."))}).nodeify(t)}),e.prototype.cancel=l(function(){var t,e,r,n;for(t in r={t:w.RUNTIME_ERROR,r:["Connection is closed."],b:[]},e=this.outstandingCallbacks)j.call(e,t)&&(null!=(n=e[t]).cursor?n.cursor._addResponse(r):null!=n.cb&&n.cb(d(T.errorClass(r.e),r,n.root)));return this.outstandingCallbacks={}}),e.prototype.reconnect=A(0,2,function(t,e){var r,n;return null!=e?(n=t,r=e):"function"==typeof t?(n={},r=t):(n=null!=t?t:{},r=e),new a(function(t){return function(e,r){var o;return o=function(n){return t.constructor.call(t,{host:t.host,port:t.port,timeout:t.timeout,authKey:t.authKey},function(t,n){return null!=t?r(t):e(n)})},t.close(n,o)}}(this)).nodeify(r)}),e.prototype.use=l(function(t){return this.db=t}),e.prototype.isOpen=function(){return this.open&&!this.closing},e.prototype._start=function(t,e,r){var n,o,i,u;if(!this.open)throw new h.ReqlDriverError("Connection is closed.");for(n in i=this.nextToken++,(o={}).global_optargs={},o.type=m.START,o.query=t.build(),o.token=i,r)j.call(r,n)&&(u=r[n],o.global_optargs[T.fromCamelCase(n)]=R.expr(u).build());if(null==r.db&&null==this.db||(o.global_optargs.db=R.db(r.db||this.db).build()),null!=r.noreply&&(o.global_optargs.noreply=R.expr(!!r.noreply).build()),null!=r.profile&&(o.global_optargs.profile=R.expr(!!r.profile).build()),null!=r.noreply&&r.noreply||(this.outstandingCallbacks[i]={cb:e,root:t,opts:r}),this._sendQuery(o),null!=r.noreply&&r.noreply&&"function"==typeof e)return e(null)},e.prototype._continueQuery=function(t){var e;if(!this.open)throw new h.ReqlDriverError("Connection is closed.");return e={type:m.CONTINUE,token:t},this._sendQuery(e)},e.prototype._endQuery=function(t){var e;if(!this.open)throw new h.ReqlDriverError("Connection is closed.");return e={type:m.STOP,token:t},this._sendQuery(e)},e.prototype._sendQuery=function(t){var e;return e=[t.type],void 0!==t.query&&(e.push(t.query),null!=t.global_optargs&&Object.keys(t.global_optargs).length>0&&e.push(t.global_optargs)),this._writeQuery(t.token,JSON.stringify(e))},e}(_.EventEmitter),p=function(t){function r(t,e){var n;if(!r.isAvailable())throw new h.ReqlDriverError("TCP sockets are not available in this environment");r.__super__.constructor.call(this,t,e),this.ssl?(this.ssl.host=this.host,this.ssl.port=this.port,this.rawSocket=O.connect(this.ssl)):this.rawSocket=v.connect(this.port,this.host),this.rawSocket.setNoDelay(),this.rawSocket.setKeepAlive(!0),n=setTimeout(function(t){return function(){return t.rawSocket.destroy(),t.emit("error",new h.ReqlTimeoutError("Could not connect to "+t.host+":"+t.port+", operation timed out."))}}(this),1e3*this.timeout),this.rawSocket.once("error",function(){return clearTimeout(n)}),this.rawSocket.once("connect",function(t){return function(){var e,r,o,c,a;return(a=new i(4)).writeUInt32LE(b,0),e=new i(t.authKey,"ascii"),(r=new i(4)).writeUInt32LE(e.length,0),(c=new i(4)).writeUInt32LE(g,0),t.rawSocket.write(i.concat([a,r,e,c])),o=function(e){var r,c,a,p,l,f;for(t.buffer=i.concat([t.buffer,e]),r=c=0,a=(p=t.buffer).length;c<a;r=++c)if(0===p[r]){if(t.rawSocket.removeListener("data",o),l=t.buffer.slice(0,r),t.buffer=t.buffer.slice(r+1),f=l.toString(),clearTimeout(n),f===s)return t.rawSocket.on("data",function(e){return t._data(e)}),void t.emit("connect");if(f!==u)return void t.emit("error",new h.ReqlDriverError('Server dropped connection with message: "'+f.trim()+'"'));t.emit("error",new h.ReqlAuthError("Could not connect to "+t.host+":"+t.port+", incorrect authentication key."))}},t.rawSocket.on("data",o)}}(this)),this.rawSocket.on("error",function(t){return function(e){return t.emit("error",e)}}(this)),this.rawSocket.on("close",function(t){return function(){return t.isOpen()&&t.close({noreplyWait:!1}),t.emit("close")}}(this)),this.rawSocket.on("timeout",function(t){return function(){return t.open=!1,t.emit("timeout")}}(this))}return C(r,o),r.isAvailable=function(){return!e.browser},r.prototype.close=A(0,2,function(t,n){var o,i;return null!=n?(i=t,o=n):"[object Object]"===Object.prototype.toString.call(t)?(i=t,o=null):"function"==typeof t?(i={},o=t):i={},new a(function(t){return function(n,o){var u;return u=function(r,i){var u,s,c;return s=function(){return null!=r?o(r):n(i)},u=function(){var e;return s(),null!=(e=t.rawSocket)&&e.removeAllListeners(),t.rawSocket=null,t.emit("close")},null!=t.rawSocket?"closed"===t.rawSocket.readyState?u():(null!=(c=t.rawSocket)&&c.once("close",u),t.rawSocket.end()):e.nextTick(s)},r.__super__.close.call(t,i,u)}}(this)).nodeify(o)}),r.prototype.cancel=function(){return this.rawSocket.destroy(),r.__super__.cancel.call(this)},r.prototype._writeQuery=function(t,e){var r;return(r=new i(8)).writeUInt32LE(4294967295&t,0),r.writeUInt32LE(Math.floor(t/4294967295),4),this.rawSocket.write(r),this.write(new i(e))},r.prototype.write=function(t){var e;return(e=new i(4)).writeUInt32LE(t.length,0),this.rawSocket.write(e),this.rawSocket.write(t)},r}(),c=function(t){function e(t,r){var n,o,i;if(!e.isAvailable())throw new h.ReqlDriverError("XMLHttpRequest is not available in this environment");e.__super__.constructor.call(this,t,r),n="https"===t.protocol?"https":this.DEFAULT_PROTOCOL,o=n+"://"+this.host+":"+this.port+t.pathname+"ajax/reql/",(i=new XMLHttpRequest).open("POST",o+"open-new-connection?cacheBuster="+Math.random(),!0),i.responseType="text",i.onreadystatechange=function(t){return function(e){if(4===i.readyState)return 200===i.status?(t._url=o,t._connId=i.response,t.emit("connect")):t.emit("error",new h.ReqlDriverError("XHR error, http status "+i.status+"."))}}(this),i.send(),this.xhr=i}return C(e,o),e.prototype.DEFAULT_PROTOCOL="http",e.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest},e.prototype.cancel=function(){var t;if(null!=this._connId)return this.xhr.abort(),(t=new XMLHttpRequest).open("POST",this._url+"close-connection?conn_id="+this._connId,!0),t.responseType="arraybuffer",t.send(),this._url=null,this._connId=null,e.__super__.cancel.call(this)},e.prototype.close=A(0,2,function(t,r){var n,o;if(null!=r?(o=t,n=r):"[object Object]"===Object.prototype.toString.call(t)?(o=t,n=null):(o={},n=t),null!=n&&"function"!=typeof n)throw new h.ReqlDriverError("Final argument to `close` must be a callback function or object.");return e.__super__.close.call(this,o,n)}),e.prototype._writeQuery=function(t,e){var r;return(r=new i(encodeURI(e).split(/%..|./).length-1+8)).writeUInt32LE(4294967295&t,0),r.writeUInt32LE(Math.floor(t/4294967295),4),r.write(e,8),this.write(r,t)},e.prototype.write=function(t,e){var r,n,o;for((o=new XMLHttpRequest).open("POST",this._url+"?conn_id="+this._connId,!0),o.responseType="arraybuffer",o.onreadystatechange=function(t){return function(e){var r,n;if(4===o.readyState&&200===o.status)return n=new i(function(){var t,e,n,i;for(i=[],t=0,e=(n=new Uint8Array(o.response)).length;t<e;t++)r=n[t],i.push(r);return i}()),t._data(n)}}(this),o.onerror=function(t){return function(r){return t.outstandingCallbacks[e].cb(new Error("This HTTP connection is not open"))}}(this),n=new Uint8Array(t.length),r=0;r<t.length;)n[r]=t[r],r++;return o.send(n),this.xhr=o},e}(),t.exports.isConnection=function(t){return t instanceof o},t.exports.connect=A(0,2,function(t,e){var r;return"function"==typeof t?(r={},e=t):r=t,new a(function(t,e){return function(t,e){if(p.isAvailable())return new p(t,e);if(c.isAvailable())return new c(t,e);throw new h.ReqlDriverError("Neither TCP nor HTTP avaiable in this environment")}(r,function(r,n){return r?e(r):t(n)})}).nodeify(e)})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.configureTcpPolyfill=function(t){s.path=t.path,s.secure=t.secure,s.wsProtocols=t.wsProtocols,s.simulatedLatencyMs=t.simulatedLatencyMs},e.Socket=a,e.connect=p;var o=n(r(43)),u=n(r(44)),s={path:"/",secure:!1,wsProtocols:void 0,simulatedLatencyMs:void 0},c=function(t){return function(){throw new Error("Not implemented in TcpPolyfill: "+t)}};function a(t){var e=this;if(!(this instanceof a))return new a(t);var r=new u.default({});["on","once","removeListener","emit","addListener","removeAllListeners","setMaxListeners","listeners"].forEach(function(t){e[t]=r[t].bind(r)});var n=null;this.connect=function(t,u,c){e._simulatedLatencyMs=s.simulatedLatencyMs;var a=s.secure?"wss":"ws",p=s.path;n=new WebSocket(a+"://"+u+":"+t+p,s.wsProtocols),c&&r.on("connect",c),n.onopen=function(t){r.emit("connect")},n.onclose=function(t){r.emit("end"),r.emit("close")},n.onerror=function(t){r.emit("error",t)},n.onmessage=function(t){var e=t.data,u="string"==typeof e&&"base64"===n.protocol,c=s.wsProtocols&&s.wsProtocols.constructor===Array&&s.wsProtocols.indexOf("base64")>=0,a="undefined"!=typeof navigator&&"ReactNative"===navigator.product&&c&&!n.protocol,p=u||a;"undefined"!=typeof Blob&&e instanceof Blob?(0,o.default)(e,function(t,e){if(t)throw t;r.emit("data",e)}):p?r.emit("data",new i(e,"base64")):r.emit("data",e)}},this.end=function(t){void 0!==t&&e.write(t),n.close()},this.destroy=function(){n.close()},this.write=function(t){var r=null;if("base64"===n.protocol)r=new i(t).toString("base64");else{for(var o=new ArrayBuffer(t.length),u=new Uint8Array(o),s=0;s<t.length;++s)u[s]=t[s];r=o}var c=e._simulatedLatencyMs;"number"==typeof c&&c>0?setTimeout(function(){return n.send(r)},c):n.send(r)},this.setNoDelay=function(t){},this.setKeepAlive=function(t,e){};["setEncoding","pause","resume","setTimeout","address","unref","ref"].forEach(function(t){e[t]=c(t)})}function p(){var t={};if(arguments[0]&&"object"==typeof arguments[0])t.port=arguments[0].port,t.host=arguments[0].host,t.connectListener=arguments[1];else{if(!(Number(arguments[0])>0))throw new Error("Unsupported arguments for net.connect");t.port=arguments[0],t.host=arguments[1],t.connectListener=arguments[2]}var e=new a;return e.connect(t.port,t.host,t.connectListener),e}var l=p;e.createConnection=l;var f=c("createServer");e.createServer=f;var h=function(t){return!0};e.isIPv4=h;var _=function(t){return!1};e.isIPv6=_;e.isIP=function(t){return 4}},function(t,e){t.exports=function(t,e){if("undefined"==typeof Blob||!(t instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof e)throw new Error("second argument must be a function");var r=new FileReader;r.addEventListener("loadend",function t(n){r.removeEventListener("loadend",t,!1),n.error?e(n.error):e(null,new i(r.result))},!1),r.readAsArrayBuffer(t)}},function(t,e,r){var n;
/*!
	 * EventEmitter2
	 * https://github.com/hij1nx/EventEmitter2
	 *
	 * Copyright (c) 2013 hij1nx
	 * Licensed under the MIT license.
	 */!function(o){var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=10;function s(){this._events={},this._conf&&c.call(this,this._conf)}function c(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function a(t){this._events={},this.newListener=!1,c.call(this,t)}function p(t,e,r,n){if(!r)return[];var o,i,u,s,c,a,l,f=[],h=e.length,_=e[n],y=e[n+1];if(n===h&&r._listeners){if("function"==typeof r._listeners)return t&&t.push(r._listeners),[r];for(o=0,i=r._listeners.length;o<i;o++)t&&t.push(r._listeners[o]);return[r]}if("*"===_||"**"===_||r[_]){if("*"===_){for(u in r)"_listeners"!==u&&r.hasOwnProperty(u)&&(f=f.concat(p(t,e,r[u],n+1)));return f}if("**"===_){for(u in(l=n+1===h||n+2===h&&"*"===y)&&r._listeners&&(f=f.concat(p(t,e,r,h))),r)"_listeners"!==u&&r.hasOwnProperty(u)&&("*"===u||"**"===u?(r[u]._listeners&&!l&&(f=f.concat(p(t,e,r[u],h))),f=f.concat(p(t,e,r[u],n))):f=u===y?f.concat(p(t,e,r[u],n+2)):f.concat(p(t,e,r[u],n)));return f}f=f.concat(p(t,e,r[_],n+1))}if((s=r["*"])&&p(t,e,s,n+1),c=r["**"])if(n<h)for(u in c._listeners&&p(t,e,c,h),c)"_listeners"!==u&&c.hasOwnProperty(u)&&(u===y?p(t,e,c[u],n+2):u===_?p(t,e,c[u],n+1):((a={})[u]=c[u],p(t,e,{"**":a},n+1)));else c._listeners?p(t,e,c,h):c["*"]&&c["*"]._listeners&&p(t,e,c["*"],h);return f}a.prototype.delimiter=".",a.prototype.setMaxListeners=function(t){this._events||s.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},a.prototype.event="",a.prototype.once=function(t,e){return this.many(t,1,e),this},a.prototype.many=function(t,e,r){var n=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function o(){0==--e&&n.off(t,o),r.apply(this,arguments)}return o._origin=r,this.on(t,o),n},a.prototype.emit=function(){this._events||s.call(this);var t,e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var r=arguments.length,n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];for(o=0,r=this._all.length;o<r;o++)this.event=e,this._all[o].apply(this,n)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(this.wildcard){t=[];var i="string"==typeof e?e.split(this.delimiter):e.slice();p.call(this,t,i,this.listenerTree,0)}else t=this._events[e];if("function"==typeof t){if(this.event=e,1===arguments.length)t.call(this);else if(arguments.length>1)switch(arguments.length){case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];t.apply(this,n)}return!0}if(t){for(r=arguments.length,n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];var u=t.slice();for(o=0,r=u.length;o<r;o++)this.event=e,u[o].apply(this,n);return u.length>0||!!this._all}return!!this._all},a.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||s.call(this),this.emit("newListener",t,e),this.wildcard)return function(t,e){for(var r=0,n=(t="string"==typeof t?t.split(this.delimiter):t.slice()).length;r+1<n;r++)if("**"===t[r]&&"**"===t[r+1])return;for(var o=this.listenerTree,s=t.shift();s;){if(o[s]||(o[s]={}),o=o[s],0===t.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,e];else if(i(o._listeners)&&(o._listeners.push(e),!o._listeners.warned)){var c=u;void 0!==this._events.maxListeners&&(c=this._events.maxListeners),c>0&&o._listeners.length>c&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}else o._listeners=e;return!0}s=t.shift()}return!0}.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(i(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var r=u;void 0!==this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},a.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},a.prototype.addListener=a.prototype.on,a.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var o="string"==typeof t?t.split(this.delimiter):t.slice();n=p.call(this,null,o,this.listenerTree,0)}else{if(!this._events[t])return this;r=this._events[t],n.push({_listeners:r})}for(var u=0;u<n.length;u++){var s=n[u];if(r=s._listeners,i(r)){for(var c=-1,a=0,l=r.length;a<l;a++)if(r[a]===e||r[a].listener&&r[a].listener===e||r[a]._origin&&r[a]._origin===e){c=a;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[t].splice(c,1),0===r.length&&(this.wildcard?delete s._listeners:delete this._events[t]),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete s._listeners:delete this._events[t])}return this},a.prototype.offAny=function(t){var e,r=0,n=0;if(t&&this._all&&this._all.length>0){for(r=0,n=(e=this._all).length;r<n;r++)if(t===e[r])return e.splice(r,1),this}else this._all=[];return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=p.call(this,null,e,this.listenerTree,0),n=0;n<r.length;n++){r[n]._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},a.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return p.call(this,e,r,this.listenerTree,0),e}return this._events||s.call(this),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},a.prototype.listenersAny=function(){return this._all?this._all:[]},void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n)}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=function(){throw new Error("TlsStub does not implement tls.connect()")}},function(t,e){t.exports=r(2)},function(t,e,r){var n,o,u,s,c,a,p,l,f,h,_=[].slice;o=r(48),f=r(49),l=f.Response.ErrorType,p=function(t){return 1===t?"":"s"},t.exports.ar=function(t){return function(){var e;if((e=1<=arguments.length?_.call(arguments,0):[]).length!==t.length)throw new o.ReqlDriverCompileError("Expected "+t.length+" argument"+p(t.length)+" but found "+e.length+".");return t.apply(this,e)}},t.exports.varar=function(t,e,r){return function(){var n;if(n=1<=arguments.length?_.call(arguments,0):[],null!=t&&n.length<t||null!=e&&n.length>e){if(null!=t&&null==e)throw new o.ReqlDriverCompileError("Expected "+t+" or more arguments but found "+n.length+".");if(null!=e&&null==t)throw new o.ReqlDriverCompileError("Expected "+e+" or fewer arguments but found "+n.length+".");throw new o.ReqlDriverCompileError("Expected between "+t+" and "+e+" arguments but found "+n.length+".")}return r.apply(this,n)}},t.exports.aropt=function(t){return function(){var e,r,n,i;if(null!=(i=(e=1<=arguments.length?_.call(arguments,0):[])[r=t.length-1])&&"[object Object]"!==Object.prototype.toString.call(i)&&(i=null),r!==(n=e.length-(null!=i?1:0)))throw 1!==r?new o.ReqlDriverCompileError("Expected "+r+" arguments (not including options) but found "+n+"."):new o.ReqlDriverCompileError("Expected "+r+" argument (not including options) but found "+n+".");return t.apply(this,e)}},t.exports.toArrayBuffer=function(t){var e,r,n,o,i;for(e=new Uint8Array(new ArrayBuffer(t.length)),r=n=0,o=t.length;n<o;r=++n)i=t[r],e[r]=i;return e.buffer},t.exports.fromCamelCase=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})},t.exports.toCamelCase=function(t){return t.replace(/_[a-z]/g,function(t){return t[1].toUpperCase()})},n=function(t,e){var r,n,u,s,c;switch(t.$reql_type$){case"TIME":switch(e.timeFormat){case"native":case void 0:if(null==t.epoch_time)throw new o.ReqlDriverError("pseudo-type TIME "+t+" object missing expected field 'epoch_time'.");return new Date(1e3*t.epoch_time);case"raw":return t;default:throw new o.ReqlDriverError("Unknown timeFormat run option "+e.timeFormat+".")}break;case"GROUPED_DATA":switch(e.groupFormat){case"native":case void 0:for(c=[],n=0,u=(s=t.data).length;n<u;n++)r=s[n],c.push({group:r[0],reduction:r[1]});return c;case"raw":return t;default:throw new o.ReqlDriverError("Unknown groupFormat run option "+e.groupFormat+".")}break;case"BINARY":switch(e.binaryFormat){case"native":case void 0:if(null==t.data)throw new o.ReqlDriverError("pseudo-type BINARY object missing expected field 'data'.");return new i(t.data,"base64");case"raw":return t;default:throw new o.ReqlDriverError("Unknown binaryFormat run option "+e.binaryFormat+".")}break;default:return t}},h=function(t,e){var r,o,i,u,s;if(Array.isArray(t))for(r=o=0,u=t.length;o<u;r=++o)s=t[r],t[r]=h(s,e);else if(t&&"object"==typeof t){for(i in t)s=t[i],t[i]=h(s,e);t=n(t,e)}return t},s=function(t,e){return h(t.r[0],e)},a=function(t,e){return h(t.r,e)},c=function(t,e,r){return new t(s(e),r,e.b)},u=function(t){switch(t){case l.QUERY_LOGIC:return o.ReqlQueryLogicError;case l.NON_EXISTENCE:return o.ReqlNonExistenceError;case l.RESOURCE_LIMIT:return o.ReqlResourceLimitError;case l.USER:return o.ReqlUserError;case l.INTERNAL:return o.ReqlInternalError;case l.OP_FAILED:return o.ReqlOpFailedError;case l.OP_INDETERMINATE:return o.ReqlOpIndeterminateError;default:return o.ReqlRuntimeError}},t.exports.recursivelyConvertPseudotype=h,t.exports.mkAtom=s,t.exports.mkSeq=a,t.exports.mkErr=c,t.exports.errorClass=u},function(t,e){var r,n,o,i,u,s,c,a,p,l,f,h,_,y,d,v,g,m=function(t,e){for(var r in e)w.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;s=function(t){function e(t,e,r){this.name=this.constructor.name,this.msg=t,this.frames=null!=r?r.slice(0):void 0,null!=e?"."===t[t.length-1]?this.message=t.slice(0,t.length-1)+" in:\n"+h.prototype.printQuery(e)+"\n"+h.prototype.printCarrots(e,r):this.message=t+" in:\n"+h.prototype.printQuery(e)+"\n"+h.prototype.printCarrots(e,r):this.message=""+t,null!=Error.captureStackTrace&&Error.captureStackTrace(this,this)}return m(e,t),e}(Error),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,s),e}(),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,o),e}(),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,o),e}(),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,s),e}(),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,u),e}(),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,s),e}(),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,y),e}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,f),e}(),_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,y),e}(),g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,y),e}(),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,y),e}(),v=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,s),e}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,y),e}(),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,n),e}(),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,n),e}(),h=function(){var t,e,r,n,o;function i(){}return i.prototype.printQuery=function(t){var e;return e=n(t),o(e)},n=function(t){var e,r,o,i,u;for(o in r=function(){var r,o,i,u;for(u=[],r=0,o=(i=t.args).length;r<o;r++)e=i[r],u.push(n(e));return u}(),i={},u=t.optargs)w.call(u,o)&&(e=u[o],i[o]=n(e));return t.compose(r,i)},i.prototype.printCarrots=function(t,i){var u;return u=0===i.length?[e(n(t))]:r(t,i),o(u).replace(/[^\^]/g," ")},r=function(t,o){var i,u,s,c,a,p,l;for(a in s=o.shift(),u=function(){var e,u,a,p;for(a=t.args,p=[],c=e=0,u=a.length;e<u;c=++e)i=a[c],s===c?p.push(r(i,o)):p.push(n(i));return p}(),p={},l=t.optargs)w.call(l,a)&&(i=l[a],p[a]=s===a?r(i,o):n(i));return null!=s?t.compose(u,p):e(t.compose(u,p))},t={},e=function(e){return[t,e]},o=function(e){var r,n,i,u;for(i="",r=0,n=e.length;r<n;r++)u=e[r],Array.isArray(u)?2===u.length&&u[0]===t?i+=o(u[1]).replace(/./g,"^"):i+=o(u):i+=u;return i},i}(),t.exports={ReqlError:s,ReqlCompileError:o,RqlCompileError:o,ReqlServerCompileError:d,ReqlDriverCompileError:i,RqlClientError:u,ReqlRuntimeError:y,RqlRuntimeError:y,RqlServerError:y,ReqlQueryLogicError:f,ReqlNonExistenceError:a,ReqlResourceLimitError:_,ReqlUserError:g,ReqlInternalError:c,ReqlTimeoutError:v,ReqlAvailabilityError:n,ReqlOpFailedError:p,ReqlOpIndeterminateError:l,ReqlDriverError:u,RqlDriverError:u,ReqlAuthError:r,printQuery:h.prototype.printQuery}},function(t,e){t.exports={VersionDummy:{Version:{V0_1:1063369270,V0_2:1915781601,V0_3:1601562686,V0_4:1074539808},Protocol:{PROTOBUF:656407617,JSON:2120839367}},Query:{QueryType:{START:1,CONTINUE:2,STOP:3,NOREPLY_WAIT:4,SERVER_INFO:5},AssocPair:{}},Frame:{FrameType:{POS:1,OPT:2}},Backtrace:{},Response:{ResponseType:{SUCCESS_ATOM:1,SUCCESS_SEQUENCE:2,SUCCESS_PARTIAL:3,WAIT_COMPLETE:4,SERVER_INFO:5,CLIENT_ERROR:16,COMPILE_ERROR:17,RUNTIME_ERROR:18},ErrorType:{INTERNAL:1e6,RESOURCE_LIMIT:2e6,QUERY_LOGIC:3e6,NON_EXISTENCE:31e5,OP_FAILED:41e5,OP_INDETERMINATE:42e5,USER:5e6},ResponseNote:{SEQUENCE_FEED:1,ATOM_FEED:2,ORDER_BY_LIMIT_FEED:3,UNIONED_FEED:4,INCLUDES_STATES:5}},Datum:{DatumType:{R_NULL:1,R_BOOL:2,R_NUM:3,R_STR:4,R_ARRAY:5,R_OBJECT:6,R_JSON:7},AssocPair:{}},Term:{TermType:{DATUM:1,MAKE_ARRAY:2,MAKE_OBJ:3,VAR:10,JAVASCRIPT:11,UUID:169,HTTP:153,ERROR:12,IMPLICIT_VAR:13,DB:14,TABLE:15,GET:16,GET_ALL:78,EQ:17,NE:18,LT:19,LE:20,GT:21,GE:22,NOT:23,ADD:24,SUB:25,MUL:26,DIV:27,MOD:28,FLOOR:183,CEIL:184,ROUND:185,APPEND:29,PREPEND:80,DIFFERENCE:95,SET_INSERT:88,SET_INTERSECTION:89,SET_UNION:90,SET_DIFFERENCE:91,SLICE:30,SKIP:70,LIMIT:71,OFFSETS_OF:87,CONTAINS:93,GET_FIELD:31,KEYS:94,VALUES:186,OBJECT:143,HAS_FIELDS:32,WITH_FIELDS:96,PLUCK:33,WITHOUT:34,MERGE:35,BETWEEN_DEPRECATED:36,BETWEEN:182,REDUCE:37,MAP:38,FILTER:39,CONCAT_MAP:40,ORDER_BY:41,DISTINCT:42,COUNT:43,IS_EMPTY:86,UNION:44,NTH:45,BRACKET:170,INNER_JOIN:48,OUTER_JOIN:49,EQ_JOIN:50,ZIP:72,RANGE:173,INSERT_AT:82,DELETE_AT:83,CHANGE_AT:84,SPLICE_AT:85,COERCE_TO:51,TYPE_OF:52,UPDATE:53,DELETE:54,REPLACE:55,INSERT:56,DB_CREATE:57,DB_DROP:58,DB_LIST:59,TABLE_CREATE:60,TABLE_DROP:61,TABLE_LIST:62,CONFIG:174,STATUS:175,WAIT:177,RECONFIGURE:176,REBALANCE:179,SYNC:138,INDEX_CREATE:75,INDEX_DROP:76,INDEX_LIST:77,INDEX_STATUS:139,INDEX_WAIT:140,INDEX_RENAME:156,FUNCALL:64,BRANCH:65,OR:66,AND:67,FOR_EACH:68,FUNC:69,ASC:73,DESC:74,INFO:79,MATCH:97,UPCASE:141,DOWNCASE:142,SAMPLE:81,DEFAULT:92,JSON:98,TO_JSON_STRING:172,ISO8601:99,TO_ISO8601:100,EPOCH_TIME:101,TO_EPOCH_TIME:102,NOW:103,IN_TIMEZONE:104,DURING:105,DATE:106,TIME_OF_DAY:126,TIMEZONE:127,YEAR:128,MONTH:129,DAY:130,DAY_OF_WEEK:131,DAY_OF_YEAR:132,HOURS:133,MINUTES:134,SECONDS:135,TIME:136,MONDAY:107,TUESDAY:108,WEDNESDAY:109,THURSDAY:110,FRIDAY:111,SATURDAY:112,SUNDAY:113,JANUARY:114,FEBRUARY:115,MARCH:116,APRIL:117,MAY:118,JUNE:119,JULY:120,AUGUST:121,SEPTEMBER:122,OCTOBER:123,NOVEMBER:124,DECEMBER:125,LITERAL:137,GROUP:144,SUM:145,AVG:146,MIN:147,MAX:148,SPLIT:149,UNGROUP:150,RANDOM:151,CHANGES:152,ARGS:154,BINARY:155,GEOJSON:157,TO_GEOJSON:158,POINT:159,LINE:160,POLYGON:161,DISTANCE:162,INTERSECTS:163,INCLUDES:164,CIRCLE:165,GET_INTERSECTING:166,FILL:167,GET_NEAREST:168,POLYGON_SUB:171,MINVAL:180,MAXVAL:181},AssocPair:{}}}},function(t,e,r){var n,o,i,u,s,c,a,p,l,f,h,_,y,d,v,g=function(t,e){return function(){return t.apply(e,arguments)}},m=[].slice,w=function(t,e){for(var r in e)b.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;f=r(48),d=r(47),_=r(49).Response.ResponseType,p=r(2),u=r(46).EventEmitter,l=d.ar,v=d.varar,d.aropt,h=d.mkErr,void 0!==y&&null!==y||(y=function(t){return setTimeout(t,0)}),c=function(){function t(t,e,r,n){this._eachCb=g(this._eachCb,this),this._conn=t,this._token=e,this._opts=r,this._root=n,this._responses=[],this._responseIndex=0,this._outstandingRequests=1,this._iterations=0,this._endFlag=!1,this._contFlag=!1,this._closeAsap=!1,this._cont=null,this._cbQueue=[],this._closeCb=null,this._closeCbPromise=null,this.next=this._next,this.each=this._each,this.eachAsync=this._eachAsync}return t.prototype.stackSize=100,t.prototype._addResponse=function(t){if(t.t===this._type||t.t===_.SUCCESS_SEQUENCE?t.r.length>0&&this._responses.push(t):this._responses.push(t),this._outstandingRequests-=1,t.t!==this._type&&(this._endFlag=!0,null!=this._closeCb))switch(t.t){case _.COMPILE_ERROR:this._closeCb(h(f.ReqlServerCompileError,t,this._root));break;case _.CLIENT_ERROR:this._closeCb(h(f.ReqlClientError,t,this._root));break;case _.RUNTIME_ERROR:this._closeCb(h(d.errorClass(t.e),t,this._root));break;default:this._closeCb()}return this._contFlag=!1,!1===this._closeAsap?this._promptNext():this.close(this._closeCb),this},t.prototype._getCallback=function(){var t;return this._iterations+=1,t=this._cbQueue.shift(),this._iterations%this.stackSize==this.stackSize-1?function(e,r){return y(function(){return t(e,r)})}:t},t.prototype._handleRow=function(){var t,e,r;return e=this._responses[0],r=d.recursivelyConvertPseudotype(e.r[this._responseIndex],this._opts),t=this._getCallback(),this._responseIndex+=1,this._responseIndex===e.r.length&&(this._responses.shift(),this._responseIndex=0),t(null,r)},t.prototype.bufferEmpty=function(){return 0===this._responses.length||this._responses[0].r.length<=this._responseIndex},t.prototype._promptNext=function(){for(var t,e,r;null!=this._cbQueue[0];){if(!0===this.bufferEmpty())return void(!0===this._endFlag?(t=this._getCallback())(new f.ReqlDriverError("No more rows in the cursor.")):this._responses.length<=1&&this._promptCont());switch(r=this._responses[0],1===this._responses.length&&this._promptCont(),r.t){case _.SUCCESS_PARTIAL:this._handleRow();break;case _.SUCCESS_SEQUENCE:0===r.r.length?this._responses.shift():this._handleRow();break;case _.COMPILE_ERROR:this._responses.shift(),(t=this._getCallback())(h(f.ReqlServerCompileError,r,this._root));break;case _.CLIENT_ERROR:this._responses.shift(),(t=this._getCallback())(h(f.ReqlClientError,r,this._root));break;case _.RUNTIME_ERROR:this._responses.shift(),t=this._getCallback(),e=d.errorClass(r.e),t(h(e,r,this._root));break;default:this._responses.shift(),(t=this._getCallback())(new f.ReqlDriverError("Unknown response type for cursor"))}}},t.prototype._promptCont=function(){if(!this._contFlag&&!this._endFlag&&this._conn.isOpen())return this._contFlag=!0,this._outstandingRequests+=1,this._conn._continueQuery(this._token)},t.prototype.hasNext=function(){throw new f.ReqlDriverError("The `hasNext` command has been removed since 1.13. Use `next` instead.")},t.prototype._next=v(0,1,function(t){var e;if(null!=t&&"function"!=typeof t)throw new f.ReqlDriverError("First argument to `next` must be a function or undefined.");return e=function(t){return function(e){return t._cbQueue.push(e),t._promptNext()}}(this),p.fromNode(e).nodeify(t)}),t.prototype.close=v(0,1,function(t){return null!=this._closeCbPromise?this._closeCbPromise.isPending()?this._closeCbPromise=this._closeCbPromise.nodeify(t):this._closeCbPromise=p.resolve().nodeify(t):this._endFlag?this._closeCbPromise=p.resolve().nodeify(t):this._closeCbPromise=new p(function(t){return function(e,r){return t._closeCb=function(n){for(;t._cbQueue.length>0;)t._cbQueue.shift();return t._outstandingRequests=0,n?r(n):e()},t._closeAsap=!0,t._outstandingRequests+=1,t._conn._endQuery(t._token)}}(this)).nodeify(t),this._closeCbPromise}),t.prototype._each=v(1,2,function(t,e){var r;if("function"!=typeof t)throw new f.ReqlDriverError("First argument to each must be a function.");if(null!=e&&"function"!=typeof e)throw new f.ReqlDriverError("Optional second argument to each must be a function.");return this,r=function(n){return function(o,i){return null!=o?"No more rows in the cursor."===o.message?"function"==typeof e?e():void 0:t(o):!1!==t(null,i)?n._next(r):"function"==typeof e?e():void 0}}(this),this._next(r)}),t.prototype._eachAsync=function(t){var e;if("function"!=typeof t)throw new f.ReqlDriverCompileError("First argument to eachAsync must be a function.");return(e=function(r){return function(){return r._next().then(t).then(e).catch(function(t){if("No more rows in the cursor."!==(null!=t?t.message:void 0))throw t})}}(this))()},t.prototype.toArray=v(0,1,function(t){var e;if(null!=t&&"function"!=typeof t)throw new f.ReqlDriverCompileError("First argument to `toArray` must be a function or undefined.");return e=[],this.eachAsync(e.push.bind(e)).return(e).nodeify(t)}),t.prototype._makeEmitter=function(){return this.emitter=new u,this.each=function(){throw new f.ReqlDriverError("You cannot use the cursor interface and the EventEmitter interface at the same time.")},this.next=function(){throw new f.ReqlDriverError("You cannot use the cursor interface and the EventEmitter interface at the same time.")}},t.prototype.addListener=function(t,e){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.addListener(t,e)},t.prototype.on=function(t,e){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.on(t,e)},t.prototype.once=function(t,e){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.once(t,e)},t.prototype.removeListener=function(t,e){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.removeListener(t,e)},t.prototype.removeAllListeners=function(t){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.removeAllListeners(t)},t.prototype.setMaxListeners=function(t){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.setMaxListeners(t)},t.prototype.listeners=function(t){return null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),this.emitter.listeners(t)},t.prototype.emit=function(){var t,e;return t=1<=arguments.length?m.call(arguments,0):[],null==this.emitter&&(this._makeEmitter(),y(function(t){return function(){return t._each(t._eachCb)}}(this))),(e=this.emitter).emit.apply(e,t)},t.prototype._eachCb=function(t,e){return null!=t?this.emitter.emit("error",t):this.emitter.emit("data",e)},t}(),i=function(t){function e(){this._type=_.SUCCESS_PARTIAL,e.__super__.constructor.apply(this,arguments)}return w(e,c),e.prototype.toString=l(function(){return"[object Cursor]"}),e}(),s=function(t){function e(){this._type=_.SUCCESS_PARTIAL,e.__super__.constructor.apply(this,arguments)}return w(e,c),e.prototype.hasNext=function(){throw new f.ReqlDriverError("`hasNext` is not available for feeds.")},e.prototype.toArray=function(){throw new f.ReqlDriverError("`toArray` is not available for feeds.")},e.prototype.toString=l(function(){return"[object Feed]"}),e}(),function(t){function e(){this._type=_.SUCCESS_PARTIAL,e.__super__.constructor.apply(this,arguments)}w(e,c),e.prototype.hasNext=function(){throw new f.ReqlDriverError("`hasNext` is not available for feeds.")},e.prototype.toArray=function(){throw new f.ReqlDriverError("`toArray` is not available for feeds.")},e.prototype.toString=l(function(){return"[object UnionedFeed]"})}(),o=function(t){function e(){this._type=_.SUCCESS_PARTIAL,e.__super__.constructor.apply(this,arguments)}return w(e,c),e.prototype.hasNext=function(){throw new f.ReqlDriverError("`hasNext` is not available for feeds.")},e.prototype.toArray=function(){throw new f.ReqlDriverError("`toArray` is not available for feeds.")},e.prototype.toString=l(function(){return"[object AtomFeed]"}),e}(),a=function(t){function e(){this._type=_.SUCCESS_PARTIAL,e.__super__.constructor.apply(this,arguments)}return w(e,c),e.prototype.hasNext=function(){throw new f.ReqlDriverError("`hasNext` is not available for feeds.")},e.prototype.toArray=function(){throw new f.ReqlDriverError("`toArray` is not available for feeds.")},e.prototype.toString=l(function(){return"[object OrderByLimitFeed]"}),e}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return w(e,c),e.prototype._hasNext=l(function(){return null==this.__index&&(this.__index=0),this.__index<this.length}),e.prototype._next=v(0,1,function(t){var e;return e=function(t){return function(e){var r;return!0===t._hasNext()?(r=t).__index%t.stackSize==t.stackSize-1?y(function(){return e(null,r[r.__index++])}):e(null,r[r.__index++]):e(new f.ReqlDriverError("No more rows in the cursor."))}}(this),new p(function(t,r){return e(function(e,n){return e?r(e):t(n)})}).nodeify(t)}),e.prototype.toArray=v(0,1,function(t){var e;return e=function(t){return function(e){return null!=t.__index?e(null,t.slice(t.__index,t.length)):e(null,t)}}(this),new p(function(t,r){return e(function(e,n){return e?r(e):t(n)})}).nodeify(t)}),e.prototype.close=function(){return this},e.prototype.makeIterable=function(t){var r,n,o;for(n in t.__proto__={},o=e.prototype)r=o[n],"constructor"!==n&&("_each"===n?(t.__proto__.each=r,t.__proto__._each=r):"_next"===n?(t.__proto__.next=r,t.__proto__._next=r):t.__proto__[n]=r);return t.__proto__.__proto__=[].__proto__,t},e}(),t.exports.Cursor=i,t.exports.Feed=s,t.exports.AtomFeed=o,t.exports.OrderByLimitFeed=a,t.exports.makeIterable=n.prototype.makeIterable},function(t,r,n){var o,u,s,c,a,p,l,f,h,_,y,d,v,g,m,w,b,E,R,O,T,A,C,j,S,k,I,P,x,L,F,N,D,U,M,B,q,Y,H,$,V,Q,J,G,W,z,X,K,Z,tt,et,rt,nt,ot,it,ut,st,ct,at,pt,lt,ft,ht,_t,yt,dt,vt,gt,mt,wt,bt,Et,Rt,Ot,Tt,At,Ct,jt,St,kt,It,Pt,xt,Lt,Ft,Nt,Dt,Ut,Mt,Bt,qt,Yt,Ht,$t,Vt,Qt,Jt,Gt,Wt,zt,Xt,Kt,Zt,te,ee,re,ne,oe,ie,ue,se,ce,ae,pe,le,fe,he,_e,ye,de,ve,ge,me,we,be,Ee,Re,Oe,Te,Ae,Ce,je,Se,ke,Ie,Pe,xe,Le,Fe,Ne,De,Ue,Me,Be,qe,Ye,He,$e,Ve,Qe,Je,Ge,We,ze,Xe,Ke,Ze,tr,er,rr,nr,or,ir,ur,sr,cr,ar,pr,lr,fr,hr,_r,yr,dr,vr,gr=[].slice,mr={}.hasOwnProperty,wr=function(t,e){for(var r in e)mr.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};dr=n(47),or=n(48),pr=n(41),lr=n(49).Term.TermType,oe=n(2),rr=dr.ar,vr=dr.varar,nr=dr.aropt,fr=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],fr.expr.apply(fr,t)},ir=function(t){var e;return void 0===t?t:(t=fr.expr(t),(e=function(t){var r,n;return t instanceof Le&&(t instanceof pt||(!!t.args.map(e).some(function(t){return t})||!!function(){var e,o;for(r in o=[],e=t.optargs)mr.call(e,r)&&(n=e[r],o.push(n));return o}().map(e).some(function(t){return t})))})(t)?new z({},function(e){return t}):t)},ur=function(t){var e,r,n;if(Array.isArray(t)){for(r=0,n=t.length;r<n;r++)if(e=t[r],!0===ur(e))return!0}else if("r.row"===t)return!0;return!1},Le=function(){function t(){var t;return void 0!=={}.__proto__?((t=rr(function(e){return t.bracket(e)})).__proto__=this.__proto__,t):this}return t.prototype.showRunWarning=!0,t.prototype.run=function(t,r,n){if(!0===pr.isConnection(t)){if("function"==typeof r){if(void 0!==n)return oe.reject(new or.ReqlDriverError("Second argument to `run` cannot be a function if a third argument is provided.")).nodeify(r);n=r,r={}}}else(null!=t?t.constructor:void 0)===Object&&(!0===this.showRunWarning&&(void 0!==e&&null!==e&&e.stderr.write("RethinkDB warning: This syntax is deprecated. Please use `run(connection[, options], callback)`."),this.showRunWarning=!1),n=r,r=t,t=t.connection,delete r.connection);return null==r&&(r={}),null!=n&&"function"!=typeof n?oe.reject(new or.ReqlDriverError("If provided, the callback must be a function. Please use `run(connection[, options][, callback])")):!1===pr.isConnection(t)?oe.reject(new or.ReqlDriverError("First argument to `run` must be an open connection.")).nodeify(n):new oe(function(e){return function(n,o){var i,u;u=function(t,e){return null!=t?o(t):n(e)};try{return t._start(e,u,r)}catch(i){return u(i)}}}(this)).nodeify(n)},t.prototype.toString=function(){return or.printQuery(this)},t}(),se=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,Le),e.prototype.eq=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(H,[{},this].concat(gr.call(t)),function(){})},e.prototype.ne=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}($t,[{},this].concat(gr.call(t)),function(){})},e.prototype.lt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Pt,[{},this].concat(gr.call(t)),function(){})},e.prototype.le=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(jt,[{},this].concat(gr.call(t)),function(){})},e.prototype.gt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(it,[{},this].concat(gr.call(t)),function(){})},e.prototype.ge=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(X,[{},this].concat(gr.call(t)),function(){})},e.prototype.not=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Vt,[{},this].concat(gr.call(t)),function(){})},e.prototype.add=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(o,[{},this].concat(gr.call(t)),function(){})},e.prototype.sub=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ce,[{},this].concat(gr.call(t)),function(){})},e.prototype.mul=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ht,[{},this].concat(gr.call(t)),function(){})},e.prototype.div=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(M,[{},this].concat(gr.call(t)),function(){})},e.prototype.mod=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(qt,[{},this].concat(gr.call(t)),function(){})},e.prototype.floor=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(J,[{},this].concat(gr.call(t)),function(){})},e.prototype.ceil=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(y,[{},this].concat(gr.call(t)),function(){})},e.prototype.round=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ye,[{},this].concat(gr.call(t)),function(){})},e.prototype.append=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(s,[{},this].concat(gr.call(t)),function(){})},e.prototype.prepend=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ne,[{},this].concat(gr.call(t)),function(){})},e.prototype.difference=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(N,[{},this].concat(gr.call(t)),function(){})},e.prototype.setInsert=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(me,[{},this].concat(gr.call(t)),function(){})},e.prototype.setUnion=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(be,[{},this].concat(gr.call(t)),function(){})},e.prototype.setIntersection=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(we,[{},this].concat(gr.call(t)),function(){})},e.prototype.setDifference=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ge,[{},this].concat(gr.call(t)),function(){})},e.prototype.slice=vr(1,3,function(t,e,r){return null!=r?new Re(r,this,t,e):void 0!==e?"[object Object]"!==Object.prototype.toString.call(e)||e instanceof Le?new Re({},this,t,e):new Re(e,this,t):new Re({},this,t)}),e.prototype.skip=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ee,[{},this].concat(gr.call(t)),function(){})},e.prototype.limit=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(St,[{},this].concat(gr.call(t)),function(){})},e.prototype.getField=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(et,[{},this].concat(gr.call(t)),function(){})},e.prototype.contains=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(E,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.insertAt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Et,[{},this].concat(gr.call(t)),function(){})},e.prototype.spliceAt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Oe,[{},this].concat(gr.call(t)),function(){})},e.prototype.deleteAt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(L,[{},this].concat(gr.call(t)),function(){})},e.prototype.changeAt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(d,[{},this].concat(gr.call(t)),function(){})},e.prototype.offsetsOf=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Wt,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.hasFields=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ut,[{},this].concat(gr.call(t)),function(){})},e.prototype.withFields=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ke,[{},this].concat(gr.call(t)),function(){})},e.prototype.keys=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ct,[{},this].concat(gr.call(t)),function(){})},e.prototype.values=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(We,[{},this].concat(gr.call(t)),function(){})},e.prototype.changes=nr(function(t){return new v(t,this)}),e.prototype.pluck=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Zt,[{},this].concat(gr.call(t)),function(){})},e.prototype.without=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ze,[{},this].concat(gr.call(t)),function(){})},e.prototype.merge=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ut,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.between=nr(function(t,e,r){return new l(r,this,t,e)}),e.prototype.reduce=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(he,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.map=vr(1,null,function(){var t,e,r;return t=2<=arguments.length?gr.call(arguments,0,r=arguments.length-1):(r=0,[]),e=arguments[r++],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ft,[{},this].concat(gr.call(t),[ir(e)]),function(){})}),e.prototype.filter=nr(function(t,e){return new Q(e,this,ir(t))}),e.prototype.concatMap=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(w,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.distinct=nr(function(t){return new U(t,this)}),e.prototype.count=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(R,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.union=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ve,[{},this].concat(gr.call(t)),function(){})},e.prototype.nth=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Jt,[{},this].concat(gr.call(t)),function(){})},e.prototype.bracket=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(h,[{},this].concat(gr.call(t)),function(){})},e.prototype.toJSON=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(qe,[{},this].concat(gr.call(t)),function(){})},e.prototype.toJsonString=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(qe,[{},this].concat(gr.call(t)),function(){})},e.prototype.match=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Nt,[{},this].concat(gr.call(t)),function(){})},e.prototype.split=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Te,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.upcase=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Qe,[{},this].concat(gr.call(t)),function(){})},e.prototype.downcase=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(B,[{},this].concat(gr.call(t)),function(){})},e.prototype.isEmpty=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ot,[{},this].concat(gr.call(t)),function(){})},e.prototype.innerJoin=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(wt,[{},this].concat(gr.call(t)),function(){})},e.prototype.outerJoin=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Kt,[{},this].concat(gr.call(t)),function(){})},e.prototype.eqJoin=nr(function(t,e,r){return new $(r,this,ir(t),e)}),e.prototype.zip=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(er,[{},this].concat(gr.call(t)),function(){})},e.prototype.coerceTo=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(m,[{},this].concat(gr.call(t)),function(){})},e.prototype.ungroup=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}($e,[{},this].concat(gr.call(t)),function(){})},e.prototype.typeOf=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ye,[{},this].concat(gr.call(t)),function(){})},e.prototype.update=nr(function(t,e){return new Je(e,this,ir(t))}),e.prototype.delete=nr(function(t){return new x(t,this)}),e.prototype.replace=nr(function(t,e){return new _e(e,this,ir(t))}),e.prototype.do=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(W,[{},ir(t.slice(-1)[0]),this].concat(gr.call(t.slice(0,-1))),function(){})},e.prototype.default=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(P,[{},this].concat(gr.call(t)),function(){})},e.prototype.or=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(zt,[{},this].concat(gr.call(t)),function(){})},e.prototype.and=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(u,[{},this].concat(gr.call(t)),function(){})},e.prototype.branch=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(_,[{},this].concat(gr.call(t)),function(){})},e.prototype.forEach=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(G,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.sum=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(je,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.avg=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(p,[{},this].concat(gr.call(t.map(ir))),function(){})},e.prototype.info=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(mt,[{},this].concat(gr.call(t)),function(){})},e.prototype.sample=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(de,[{},this].concat(gr.call(t)),function(){})},e.prototype.group=function(){var t,e,r,n;return r={},t=e=1<=arguments.length?gr.call(arguments,0):[],e.length>0&&(!(n=e[e.length-1])||"[object Object]"!==Object.prototype.toString.call(n)||n instanceof Le||(r=n,t=e.slice(0,e.length-1))),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ot,[r,this].concat(gr.call(t.map(ir))),function(){})},e.prototype.orderBy=function(){var t,e,r,n,o;return r=1<=arguments.length?gr.call(arguments,0):[],n={},e=r,!(o=r[r.length-1])||"[object Object]"!==Object.prototype.toString.call(o)||o instanceof Le||(n=o,e=r.slice(0,r.length-1)),e=function(){var r,n,o;for(o=[],r=0,n=e.length;r<n;r++)(t=e[r])instanceof a||t instanceof F?o.push(t):o.push(ir(t));return o}(),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Xt,[n,this].concat(gr.call(e)),function(){})},e.prototype.toGeojson=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Me,[{},this].concat(gr.call(t)),function(){})},e.prototype.distance=nr(function(t,e){return new D(e,this,t)}),e.prototype.intersects=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Rt,[{},this].concat(gr.call(t)),function(){})},e.prototype.includes=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ft,[{},this].concat(gr.call(t)),function(){})},e.prototype.fill=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(V,[{},this].concat(gr.call(t)),function(){})},e.prototype.polygonSub=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(re,[{},this].concat(gr.call(t)),function(){})},e.prototype.tableCreate=nr(function(t,e){return new Ie(e,this,t)}),e.prototype.tableDrop=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Pe,[{},this].concat(gr.call(t)),function(){})},e.prototype.tableList=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(xe,[{},this].concat(gr.call(t)),function(){})},e.prototype.config=function(){return new b({},this)},e.prototype.status=function(){return new Ae({},this)},e.prototype.wait=nr(function(t){return new Xe(t,this)}),e.prototype.table=nr(function(t,e){return new ke(e,this,t)}),e.prototype.get=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Z,[{},this].concat(gr.call(t)),function(){})},e.prototype.getAll=function(){var t,e,r,n;return r={},t=e=1<=arguments.length?gr.call(arguments,0):[],e.length>1&&(!(n=e[e.length-1])||"[object Object]"!==Object.prototype.toString.call(n)||n instanceof Le||(r=n,t=e.slice(0,e.length-1))),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(tt,[r,this].concat(gr.call(t)),function(){})},e.prototype.min=function(){var t,e,r,n;return r={},t=e=1<=arguments.length?gr.call(arguments,0):[],1===e.length&&(!(n=e[0])||"[object Object]"!==Object.prototype.toString.call(n)||n instanceof Le||(r=n,t=[])),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Mt,[r,this].concat(gr.call(t.map(ir))),function(){})},e.prototype.max=function(){var t,e,r,n;return r={},t=e=1<=arguments.length?gr.call(arguments,0):[],1===e.length&&(!(n=e[0])||"[object Object]"!==Object.prototype.toString.call(n)||n instanceof Le||(r=n,t=[])),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Dt,[r,this].concat(gr.call(t.map(ir))),function(){})},e.prototype.insert=nr(function(t,e){return new bt(e,this,fr.expr(t))}),e.prototype.indexCreate=vr(1,3,function(t,e,r){return null!=r?new ht(r,this,t,ir(e)):null!=e?"[object Object]"!==Object.prototype.toString.call(e)||"function"==typeof e||e instanceof Le?new ht({},this,t,ir(e)):new ht(e,this,t):new ht({},this,t)}),e.prototype.indexDrop=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(_t,[{},this].concat(gr.call(t)),function(){})},e.prototype.indexList=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(yt,[{},this].concat(gr.call(t)),function(){})},e.prototype.indexStatus=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(vt,[{},this].concat(gr.call(t)),function(){})},e.prototype.indexWait=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(gt,[{},this].concat(gr.call(t)),function(){})},e.prototype.indexRename=nr(function(t,e,r){return new dt(r,this,t,e)}),e.prototype.reconfigure=function(t){return new fe(t,this)},e.prototype.rebalance=function(){return new le({},this)},e.prototype.sync=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Se,[{},this].concat(gr.call(t)),function(){})},e.prototype.toISO8601=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Be,[{},this].concat(gr.call(t)),function(){})},e.prototype.toEpochTime=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ue,[{},this].concat(gr.call(t)),function(){})},e.prototype.inTimezone=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(lt,[{},this].concat(gr.call(t)),function(){})},e.prototype.during=nr(function(t,e,r){return new q(r,this,t,e)}),e.prototype.date=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ce,[{},this].concat(gr.call(t)),function(){})},e.prototype.timeOfDay=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ne,[{},this].concat(gr.call(t)),function(){})},e.prototype.timezone=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(De,[{},this].concat(gr.call(t)),function(){})},e.prototype.year=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(tr,[{},this].concat(gr.call(t)),function(){})},e.prototype.month=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Yt,[{},this].concat(gr.call(t)),function(){})},e.prototype.day=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(T,[{},this].concat(gr.call(t)),function(){})},e.prototype.dayOfWeek=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(A,[{},this].concat(gr.call(t)),function(){})},e.prototype.dayOfYear=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(C,[{},this].concat(gr.call(t)),function(){})},e.prototype.hours=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(st,[{},this].concat(gr.call(t)),function(){})},e.prototype.minutes=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Bt,[{},this].concat(gr.call(t)),function(){})},e.prototype.seconds=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ve,[{},this].concat(gr.call(t)),function(){})},e.prototype.uuid=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(He,[{},this].concat(gr.call(t)),function(){})},e.prototype.getIntersecting=nr(function(t,e){return new rt(e,this,t)}),e.prototype.getNearest=nr(function(t,e){return new nt(e,this,t)}),e}(),O=function(t){function e(t){var r;return(r=e.__super__.constructor.call(this)).data=t,r}return wr(e,se),e.prototype.args=[],e.prototype.optargs={},e.prototype.compose=function(){switch(typeof this.data){case"string":return'"'+this.data+'"';default:return""+this.data}},e.prototype.build=function(){if("number"==typeof this.data&&!isFinite(this.data))throw new TypeError("Illegal non-finite number `"+this.data.toString()+"`.");return this.data},e}(),_r=function(t){var e,r,n;for(e in r={},t)mr.call(t,e)&&(n=t[e],r[dr.toCamelCase(e)]=n);return r},yr=function(t){var e,r,n;for(e in r={},t)mr.call(t,e)&&(n=t[e],void 0!==e&&void 0!==n&&(r[dr.fromCamelCase(e)]=fr.expr(n)));return r},ue=function(t){function e(){var t,r,n,o,i;return o=arguments[0],r=2<=arguments.length?gr.call(arguments,1):[],(i=e.__super__.constructor.call(this)).args=function(){var e,o,i;for(i=[],n=e=0,o=r.length;e<o;n=++e){if(void 0===(t=r[n]))throw new or.ReqlDriverCompileError("Argument "+n+" to "+(this.st||this.mt)+" may not be `undefined`.");i.push(fr.expr(t))}return i}.call(this),i.optargs=yr(o),i}return wr(e,se),e.prototype.build=function(){var t,e,r,n,o,i,u,s,c,a;for(c=[this.tt,[]],r=0,o=(u=this.args).length;r<o;r++)e=u[r],c[1].push(e.build());for(n in i={},t=!1,s=this.optargs)mr.call(s,n)&&(a=s[n],t=!0,i[n]=a.build());return t&&c.push(i),c},e.prototype.compose=function(t,e){return this.st?["r.",this.st,"(",cr(t,e),")"]:(hr(this.args[0])&&(t[0]=["r(",t[0],")"]),[t[0],".",this.mt,"(",cr(t.slice(1),e),")"])},e}(),ie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.compose=function(t,e){return["r.",this.st]},e}(),sr=function(t){var e,r,n,o,i;if(null==t[0])return[];for(i=[t[0]],r=0,n=(o=t.slice(1)).length;r<n;r++)e=o[r],i.push(", ",e);return i},ar=function(t){var e,r;return["{",sr(function(){var n;for(e in n=[],t)mr.call(t,e)&&(r=t[e],n.push([JSON.stringify(e),": ",r]));return n}()),"}"]},cr=function(t,e){var r;return r=[],t.length>0&&r.push(sr(t)),Object.keys(e).length>0&&(r.length>0&&r.push(", "),r.push(ar(_r(e)))),r},hr=function(t){return t instanceof O||t instanceof xt||t instanceof Lt},xt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MAKE_ARRAY,e.prototype.st="[...]",e.prototype.compose=function(t){return["[",sr(t),"]"]},e}(),Lt=function(t){function e(t,r){var n,o,i;for(n in null==r&&(r=20),(o=e.__super__.constructor.call(this,{})).optargs={},t)if(mr.call(t,n)){if(void 0===(i=t[n]))throw new or.ReqlDriverCompileError("Object field '"+n+"' may not be undefined");o.optargs[n]=fr.expr(i,r-1)}return o}return wr(e,ue),e.prototype.tt=lr.MAKE_OBJECT,e.prototype.st="{...}",e.prototype.compose=function(t,e){return ar(e)},e.prototype.build=function(){var t,e,r,n;for(t in r={},e=this.optargs)mr.call(e,t)&&(n=e[t],r[t]=n.build());return r},e}(),ze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.VAR,e.prototype.compose=function(t){return["var_"+t]},e}(),Tt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.JAVASCRIPT,e.prototype.st="js",e}(),ct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.HTTP,e.prototype.st="http",e}(),At=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.JSON,e.prototype.st="json",e}(),f=function(t){function e(t){var r;if(t instanceof Le)r=e.__super__.constructor.call(this,{},t);else{if(!(t instanceof i))throw new TypeError("Parameter to `r.binary` must be a Buffer object or RQL query.");(r=e.__super__.constructor.call(this)).base64_data=t.toString("base64")}return r}return wr(e,ue),e.prototype.tt=lr.BINARY,e.prototype.st="binary",e.prototype.compose=function(){return 0===this.args.length?"r.binary(<data>)":e.__super__.compose.apply(this,arguments)},e.prototype.build=function(){return 0===this.args.length?{$reql_type$:"BINARY",data:this.base64_data}:e.__super__.build.apply(this,arguments)},e}(),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ARGS,e.prototype.st="args",e}(),Ge=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ERROR,e.prototype.st="error",e}(),ae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.RANDOM,e.prototype.st="random",e}(),pt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.IMPLICIT_VAR,e.prototype.compose=function(){return["r.row"]},e}(),j=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DB,e.prototype.st="db",e}(),ke=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TABLE,e.prototype.st="table",e.prototype.compose=function(t,e){return this.args[0]instanceof j?[t[0],".table(",cr(t.slice(1),e),")"]:["r.table(",cr(t,e),")"]},e}(),Z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GET,e.prototype.mt="get",e}(),tt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GET_ALL,e.prototype.mt="getAll",e}(),H=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.EQ,e.prototype.mt="eq",e}(),$t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.NE,e.prototype.mt="ne",e}(),Pt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.LT,e.prototype.mt="lt",e}(),jt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.LE,e.prototype.mt="le",e}(),it=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GT,e.prototype.mt="gt",e}(),X=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GE,e.prototype.mt="ge",e}(),Vt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.NOT,e.prototype.mt="not",e}(),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ADD,e.prototype.mt="add",e}(),Ce=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SUB,e.prototype.mt="sub",e}(),Ht=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MUL,e.prototype.mt="mul",e}(),M=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DIV,e.prototype.mt="div",e}(),qt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MOD,e.prototype.mt="mod",e}(),J=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.FLOOR,e.prototype.mt="floor",e}(),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CEIL,e.prototype.mt="ceil",e}(),ye=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ROUND,e.prototype.mt="round",e}(),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.APPEND,e.prototype.mt="append",e}(),ne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.PREPEND,e.prototype.mt="prepend",e}(),N=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DIFFERENCE,e.prototype.mt="difference",e}(),me=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SET_INSERT,e.prototype.mt="setInsert",e}(),be=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SET_UNION,e.prototype.mt="setUnion",e}(),we=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SET_INTERSECTION,e.prototype.mt="setIntersection",e}(),ge=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SET_DIFFERENCE,e.prototype.mt="setDifference",e}(),Re=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SLICE,e.prototype.mt="slice",e}(),Ee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SKIP,e.prototype.mt="skip",e}(),St=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.LIMIT,e.prototype.mt="limit",e}(),et=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GET_FIELD,e.prototype.mt="getField",e}(),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.BRACKET,e.prototype.st="(...)",e.prototype.compose=function(t){return[t[0],"(",t[1],")"]},e}(),E=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CONTAINS,e.prototype.mt="contains",e}(),Et=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INSERT_AT,e.prototype.mt="insertAt",e}(),Oe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SPLICE_AT,e.prototype.mt="spliceAt",e}(),L=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DELETE_AT,e.prototype.mt="deleteAt",e}(),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CHANGE_AT,e.prototype.mt="changeAt",e}(),ut=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.HAS_FIELDS,e.prototype.mt="hasFields",e}(),Ke=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.WITH_FIELDS,e.prototype.mt="withFields",e}(),Ct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.KEYS,e.prototype.mt="keys",e}(),We=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.VALUES,e.prototype.mt="values",e}(),v=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CHANGES,e.prototype.mt="changes",e}(),Gt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.OBJECT,e.prototype.mt="object",e}(),Zt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.PLUCK,e.prototype.mt="pluck",e}(),Wt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.OFFSETS_OF,e.prototype.mt="offsetsOf",e}(),Ze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.WITHOUT,e.prototype.mt="without",e}(),Ut=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MERGE,e.prototype.mt="merge",e}(),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.BETWEEN,e.prototype.mt="between",e}(),he=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.REDUCE,e.prototype.mt="reduce",e}(),Ft=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MAP,e.prototype.mt="map",e}(),Q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.FILTER,e.prototype.mt="filter",e}(),w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CONCAT_MAP,e.prototype.mt="concatMap",e}(),Xt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ORDER_BY,e.prototype.mt="orderBy",e}(),U=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DISTINCT,e.prototype.mt="distinct",e}(),R=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.COUNT,e.prototype.mt="count",e}(),Ve=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.UNION,e.prototype.mt="union",e}(),Jt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.NTH,e.prototype.mt="nth",e}(),qe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TO_JSON_STRING,e.prototype.mt="toJsonString",e}(),Nt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MATCH,e.prototype.mt="match",e}(),Te=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SPLIT,e.prototype.mt="split",e}(),Qe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.UPCASE,e.prototype.mt="upcase",e}(),B=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DOWNCASE,e.prototype.mt="downcase",e}(),Ot=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.IS_EMPTY,e.prototype.mt="isEmpty",e}(),ot=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GROUP,e.prototype.mt="group",e}(),je=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SUM,e.prototype.mt="sum",e}(),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.AVG,e.prototype.mt="avg",e}(),Mt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MIN,e.prototype.mt="min",e}(),Dt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MAX,e.prototype.mt="max",e}(),wt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INNER_JOIN,e.prototype.mt="innerJoin",e}(),Kt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.OUTER_JOIN,e.prototype.mt="outerJoin",e}(),$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.EQ_JOIN,e.prototype.mt="eqJoin",e}(),er=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ZIP,e.prototype.mt="zip",e}(),pe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.RANGE,e.prototype.st="range",e}(),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.COERCE_TO,e.prototype.mt="coerceTo",e}(),$e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.UNGROUP,e.prototype.mt="ungroup",e}(),Ye=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TYPE_OF,e.prototype.mt="typeOf",e}(),mt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INFO,e.prototype.mt="info",e}(),de=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SAMPLE,e.prototype.mt="sample",e}(),Je=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.UPDATE,e.prototype.mt="update",e}(),x=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DELETE,e.prototype.mt="delete",e}(),_e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.REPLACE,e.prototype.mt="replace",e}(),bt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INSERT,e.prototype.mt="insert",e}(),S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DB_CREATE,e.prototype.st="dbCreate",e}(),k=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DB_DROP,e.prototype.st="dbDrop",e}(),I=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DB_LIST,e.prototype.st="dbList",e}(),Ie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TABLE_CREATE,e.prototype.mt="tableCreate",e}(),Pe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TABLE_DROP,e.prototype.mt="tableDrop",e}(),xe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TABLE_LIST,e.prototype.mt="tableList",e}(),ht=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_CREATE,e.prototype.mt="indexCreate",e}(),_t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_DROP,e.prototype.mt="indexDrop",e}(),dt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_RENAME,e.prototype.mt="indexRename",e}(),yt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_LIST,e.prototype.mt="indexList",e}(),vt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_STATUS,e.prototype.mt="indexStatus",e}(),gt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INDEX_WAIT,e.prototype.mt="indexWait",e}(),b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CONFIG,e.prototype.mt="config",e}(),Ae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.STATUS,e.prototype.mt="status",e}(),Xe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.WAIT,e.prototype.mt="wait",e}(),fe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.RECONFIGURE,e.prototype.mt="reconfigure",e}(),le=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.REBALANCE,e.prototype.mt="rebalance",e}(),Se=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SYNC,e.prototype.mt="sync",e}(),W=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.FUNCALL,e.prototype.st="do",e.prototype.compose=function(t){return t.length>2?["r.do(",sr(t.slice(1)),", ",t[0],")"]:(hr(this.args[1])&&(t[1]=["r(",t[1],")"]),[t[1],".do(",t[0],")"])},e}(),P=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DEFAULT,e.prototype.mt="default",e}(),_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.BRANCH,e.prototype.st="branch",e}(),zt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.OR,e.prototype.mt="or",e}(),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.AND,e.prototype.mt="and",e}(),G=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.FOR_EACH,e.prototype.mt="forEach",e}(),z=function(t){function e(t,r){var n,o,i,u,s;for(o=[],n=[],s=0;s<r.length;)n.push(e.nextVarId),o.push(new ze({},e.nextVarId)),e.nextVarId++,s++;if(void 0===(u=r.apply(null,o)))throw new or.ReqlDriverCompileError("Anonymous function returned `undefined`. Did you forget a `return`?");return i=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(xt,[{}].concat(gr.call(n)),function(){}),e.__super__.constructor.call(this,t,i,u)}return wr(e,ue),e.prototype.tt=lr.FUNC,e.nextVarId=0,e.prototype.compose=function(t){var e,r,n,o,i,u;if(!0===ur(t[1]))return[t[1]];for(u="",r=n=0,o=(i=t[0][1]).length;n<o;r=++n)e=i[r],u+=r%2==0?ze.prototype.compose(e):e;return["function(",u,") { return ",t[1],"; }"]},e}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ASC,e.prototype.st="asc",e}(),F=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DESC,e.prototype.st="desc",e}(),It=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.LITERAL,e.prototype.st="literal",e}(),at=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.ISO8601,e.prototype.st="ISO8601",e}(),Be=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TO_ISO8601,e.prototype.mt="toISO8601",e}(),Y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.EPOCH_TIME,e.prototype.st="epochTime",e}(),Ue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TO_EPOCH_TIME,e.prototype.mt="toEpochTime",e}(),Qt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.NOW,e.prototype.st="now",e}(),lt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.IN_TIMEZONE,e.prototype.mt="inTimezone",e}(),q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DURING,e.prototype.mt="during",e}(),ce=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DATE,e.prototype.mt="date",e}(),Ne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TIME_OF_DAY,e.prototype.mt="timeOfDay",e}(),De=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TIMEZONE,e.prototype.mt="timezone",e}(),tr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.YEAR,e.prototype.mt="year",e}(),Yt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MONTH,e.prototype.mt="month",e}(),T=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DAY,e.prototype.mt="day",e}(),A=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DAY_OF_WEEK,e.prototype.mt="dayOfWeek",e}(),C=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DAY_OF_YEAR,e.prototype.mt="dayOfYear",e}(),st=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.HOURS,e.prototype.mt="hours",e}(),Bt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.MINUTES,e.prototype.mt="minutes",e}(),ve=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.SECONDS,e.prototype.mt="seconds",e}(),Fe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TIME,e.prototype.st="time",e}(),K=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GEOJSON,e.prototype.st="geojson",e}(),Me=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.TO_GEOJSON,e.prototype.mt="toGeojson",e}(),te=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.POINT,e.prototype.st="point",e}(),kt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.LINE,e.prototype.st="line",e}(),ee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.POLYGON,e.prototype.st="polygon",e}(),D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.DISTANCE,e.prototype.mt="distance",e}(),Rt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INTERSECTS,e.prototype.mt="intersects",e}(),ft=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.INCLUDES,e.prototype.mt="includes",e}(),g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.CIRCLE,e.prototype.st="circle",e}(),rt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GET_INTERSECTING,e.prototype.mt="getIntersecting",e}(),nt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.GET_NEAREST,e.prototype.mt="getNearest",e}(),V=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.FILL,e.prototype.mt="fill",e}(),re=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.POLYGON_SUB,e.prototype.mt="polygonSub",e}(),He=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ue),e.prototype.tt=lr.UUID,e.prototype.st="uuid",e}(),fr.expr=vr(1,2,function(t,e){var r;if(null==e&&(e=20),void 0===t)throw new or.ReqlDriverCompileError("Cannot wrap undefined with r.expr().");if(e<=0)throw new or.ReqlDriverCompileError("Nesting depth limit exceeded.");if("number"!=typeof e||isNaN(e))throw new or.ReqlDriverCompileError("Second argument to `r.expr` must be a number or undefined.");return t instanceof Le?t:"function"==typeof t?new z({},t):t instanceof Date?new at({},t.toISOString()):t instanceof i?new f(t):Array.isArray(t)?(t=function(){var n,o,i;for(i=[],n=0,o=t.length;n<o;n++)r=t[n],i.push(fr.expr(r,e-1));return i}(),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(xt,[{}].concat(gr.call(t)),function(){})):"number"==typeof t?new O(t):"[object Object]"===Object.prototype.toString.call(t)?new Lt(t,e):new O(t)}),fr.js=nr(function(t,e){return new Tt(e,t)}),fr.http=nr(function(t,e){return new ct(e,t)}),fr.json=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(At,[{}].concat(gr.call(t)),function(){})},fr.error=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ge,[{}].concat(gr.call(t)),function(){})},fr.random=function(){var t,e,r,n;return r={},t=e=1<=arguments.length?gr.call(arguments,0):[],!(n=e[e.length-1])||"[object Object]"!==Object.prototype.toString.call(n)||n instanceof Le||(r=n,t=e.slice(0,e.length-1)),function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ae,[r].concat(gr.call(t)),function(){})},fr.binary=rr(function(t){return new f(t)}),fr.row=new pt({}),fr.table=nr(function(t,e){return new ke(e,t)}),fr.db=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(j,[{}].concat(gr.call(t)),function(){})},fr.dbCreate=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(S,[{}].concat(gr.call(t)),function(){})},fr.dbDrop=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(k,[{}].concat(gr.call(t)),function(){})},fr.dbList=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(I,[{}].concat(gr.call(t)),function(){})},fr.tableCreate=nr(function(t,e){return new Ie(e,t)}),fr.tableDrop=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Pe,[{}].concat(gr.call(t)),function(){})},fr.tableList=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(xe,[{}].concat(gr.call(t)),function(){})},fr.wait=nr(function(t){return new Xe(t)}),fr.reconfigure=function(t){return new fe(t)},fr.rebalance=function(){return new le({})},fr.do=vr(1,null,function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(W,[{},ir(t.slice(-1)[0])].concat(gr.call(t.slice(0,-1))),function(){})}),fr.branch=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(_,[{}].concat(gr.call(t)),function(){})},fr.map=vr(1,null,function(){var t,e,r;return t=2<=arguments.length?gr.call(arguments,0,r=arguments.length-1):(r=0,[]),e=arguments[r++],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ft,[{}].concat(gr.call(t),[ir(e)]),function(){})}),fr.asc=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(a,[{}].concat(gr.call(t.map(ir))),function(){})},fr.desc=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(F,[{}].concat(gr.call(t.map(ir))),function(){})},fr.eq=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(H,[{}].concat(gr.call(t)),function(){})},fr.ne=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}($t,[{}].concat(gr.call(t)),function(){})},fr.lt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Pt,[{}].concat(gr.call(t)),function(){})},fr.le=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(jt,[{}].concat(gr.call(t)),function(){})},fr.gt=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(it,[{}].concat(gr.call(t)),function(){})},fr.ge=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(X,[{}].concat(gr.call(t)),function(){})},fr.or=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(zt,[{}].concat(gr.call(t)),function(){})},fr.and=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(u,[{}].concat(gr.call(t)),function(){})},fr.not=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Vt,[{}].concat(gr.call(t)),function(){})},fr.add=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(o,[{}].concat(gr.call(t)),function(){})},fr.sub=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ce,[{}].concat(gr.call(t)),function(){})},fr.div=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(M,[{}].concat(gr.call(t)),function(){})},fr.mul=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ht,[{}].concat(gr.call(t)),function(){})},fr.mod=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(qt,[{}].concat(gr.call(t)),function(){})},fr.floor=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(J,[{}].concat(gr.call(t)),function(){})},fr.ceil=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(y,[{}].concat(gr.call(t)),function(){})},fr.round=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ye,[{}].concat(gr.call(t)),function(){})},fr.typeOf=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ye,[{}].concat(gr.call(t)),function(){})},fr.info=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(mt,[{}].concat(gr.call(t)),function(){})},fr.literal=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(It,[{}].concat(gr.call(t)),function(){})},fr.ISO8601=nr(function(t,e){return new at(e,t)}),fr.epochTime=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Y,[{}].concat(gr.call(t)),function(){})},fr.now=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Qt,[{}].concat(gr.call(t)),function(){})},fr.time=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Fe,[{}].concat(gr.call(t)),function(){})},fr.monday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.MONDAY,e.prototype.st="monday",e}()),fr.tuesday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.TUESDAY,e.prototype.st="tuesday",e}()),fr.wednesday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.WEDNESDAY,e.prototype.st="wednesday",e}()),fr.thursday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.THURSDAY,e.prototype.st="thursday",e}()),fr.friday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.FRIDAY,e.prototype.st="friday",e}()),fr.saturday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.SATURDAY,e.prototype.st="saturday",e}()),fr.sunday=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.SUNDAY,e.prototype.st="sunday",e}()),fr.january=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.JANUARY,e.prototype.st="january",e}()),fr.february=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.FEBRUARY,e.prototype.st="february",e}()),fr.march=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.MARCH,e.prototype.st="march",e}()),fr.april=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.APRIL,e.prototype.st="april",e}()),fr.may=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.MAY,e.prototype.st="may",e}()),fr.june=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.JUNE,e.prototype.st="june",e}()),fr.july=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.JULY,e.prototype.st="july",e}()),fr.august=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.AUGUST,e.prototype.st="august",e}()),fr.september=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.SEPTEMBER,e.prototype.st="september",e}()),fr.october=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.OCTOBER,e.prototype.st="october",e}()),fr.november=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.NOVEMBER,e.prototype.st="november",e}()),fr.december=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.DECEMBER,e.prototype.st="december",e}()),fr.minval=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.MINVAL,e.prototype.st="minval",e}()),fr.maxval=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return wr(e,ie),e.prototype.tt=lr.MAXVAL,e.prototype.st="maxval",e}()),fr.object=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Gt,[{}].concat(gr.call(t)),function(){})},fr.args=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(c,[{}].concat(gr.call(t)),function(){})},fr.geojson=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(K,[{}].concat(gr.call(t)),function(){})},fr.point=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(te,[{}].concat(gr.call(t)),function(){})},fr.line=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(kt,[{}].concat(gr.call(t)),function(){})},fr.polygon=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(ee,[{}].concat(gr.call(t)),function(){})},fr.intersects=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Rt,[{}].concat(gr.call(t)),function(){})},fr.distance=nr(function(t,e,r){return new D(r,t,e)}),fr.circle=nr(function(t,e,r){return new g(r,t,e)}),fr.uuid=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(He,[{}].concat(gr.call(t)),function(){})},fr.range=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(pe,[{}].concat(gr.call(t)),function(){})},fr.union=function(){var t;return t=1<=arguments.length?gr.call(arguments,0):[],function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Ve,[{}].concat(gr.call(t)),function(){})},t.exports=fr}])})}).call(this,r(1),r(0),r(6).setImmediate,r(8).Buffer)},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(7),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(0))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,o=1,i={},u=!1,s=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){p(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&p(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),n=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){p(t.data)},n=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;n=function(e){var r=s.createElement("script");r.onreadystatechange=function(){p(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():n=function(t){setTimeout(p,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var u={callback:t,args:e};return i[o]=u,n(o),o++},c.clearImmediate=a}function a(t){delete i[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=i[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{a(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(0),r(1))},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(9),o=r(10),i=r(11);function u(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(u()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,r),o=(t=s(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|h(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(p(e),t=s(t,e<0?0:0|h(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|h(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function _(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,o){var i,u=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;u=2,s/=2,c/=2,r/=2}function a(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}if(o){var p=-1;for(i=r;i<s;i++)if(a(t,i)===a(e,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*u}else-1!==p&&(i-=i-p),p=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var l=!0,f=0;f<c;f++)if(a(t,i+f)!==a(e,f)){l=!1;break}if(l)return i}return-1}function g(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;u<n;++u){var s=parseInt(e.substr(2*u,2),16);if(isNaN(s))return u;t[r+u]=s}return u}function m(t,e,r,n){return Y(B(e,t.length-r),t,r,n)}function w(t,e,r,n){return Y(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return w(t,e,r,n)}function E(t,e,r,n){return Y(q(e),t,r,n)}function R(t,e,r,n){return Y(function(t,e){for(var r,n,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)r=t.charCodeAt(u),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function O(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,u,s,c,a=t[o],p=null,l=a>239?4:a>223?3:a>191?2:1;if(o+l<=r)switch(l){case 1:a<128&&(p=a);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&a)<<6|63&i)>127&&(p=c);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&(c=(15&a)<<12|(63&i)<<6|63&u)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=t[o+1],u=t[o+2],s=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&s)&&(c=(15&a)<<18|(63&i)<<12|(63&u)<<6|63&s)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=u(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return a(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return p(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var u=t[r];if(!c.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(n,o),o+=u.length}return n},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return j(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,o>>>=0,this===t)return 0;for(var i=o-n,u=r-e,s=Math.min(i,u),a=this.slice(n,o),p=t.slice(e,r),l=0;l<s;++l)if(a[l]!==p[l]){i=a[l],u=p[l];break}return i<u?-1:u<i?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function j(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function S(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=M(t[i]);return o}function k(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function x(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function F(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,i){return i||F(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,i){return i||F(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);P(this,t,e,r,o-1,-o)}var i=0,u=1,s=0;for(this[e]=255&t;++i<r&&(u*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);P(this,t,e,r,o-1,-o)}var i=r-1,u=1,s=0;for(this[e+i]=255&t;--i>=0&&(u*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):x(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var u=c.isBuffer(t)?t:B(new c(t,n).toString()),s=u.length;for(i=0;i<r-e;++i)this[i+e]=u[i%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],u=0;u<n;++u){if((r=t.charCodeAt(u))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(0))},function(t,e,r){"use strict";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=a(t),n=r[0],u=r[1],s=new i(function(t,e,r){return 3*(e+r)/4-r}(0,n,u)),c=0,p=u>0?n-4:n,l=0;l<p;l+=4)e=o[t.charCodeAt(l)]<<18|o[t.charCodeAt(l+1)]<<12|o[t.charCodeAt(l+2)]<<6|o[t.charCodeAt(l+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;2===u&&(e=o[t.charCodeAt(l)]<<2|o[t.charCodeAt(l+1)]>>4,s[c++]=255&e);1===u&&(e=o[t.charCodeAt(l)]<<10|o[t.charCodeAt(l+1)]<<4|o[t.charCodeAt(l+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e);return s},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],u=0,s=r-o;u<s;u+=16383)i.push(l(t,u,u+16383>s?s:u+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=u.length;s<c;++s)n[s]=u[s],o[u.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function p(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function l(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(p(n));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var i,u,s=8*o-n-1,c=(1<<s)-1,a=c>>1,p=-7,l=r?o-1:0,f=r?-1:1,h=t[e+l];for(l+=f,i=h&(1<<-p)-1,h>>=-p,p+=s;p>0;i=256*i+t[e+l],l+=f,p-=8);for(u=i&(1<<-p)-1,i>>=-p,p+=n;p>0;u=256*u+t[e+l],l+=f,p-=8);if(0===i)i=1-a;else{if(i===c)return u?NaN:1/0*(h?-1:1);u+=Math.pow(2,n),i-=a}return(h?-1:1)*u*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var u,s,c,a=8*i-o-1,p=(1<<a)-1,l=p>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,_=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,u=p):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),(e+=u+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(u++,c/=2),u+l>=p?(s=0,u=p):u+l>=1?(s=(e*c-1)*Math.pow(2,o),u+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;t[r+h]=255&s,h+=_,s/=256,o-=8);for(u=u<<o|s,a+=o;a>0;t[r+h]=255&u,h+=_,u/=256,a-=8);t[r+h-_]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}}]);